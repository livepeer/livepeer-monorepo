{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/json/stringify\"));\n\nvar _parseInt2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/parse-int\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _create = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/create\"));\n\nvar _unfetch = _interopRequireDefault(require(\"unfetch\"));\n/* eslint-disable */\n// Improved version of https://github.com/Yaffle/EventSource/\n// Available under MIT License (MIT)\n// Only tries to support IE11 and nothing below\n\n\nvar document = window.document;\nvar Response = window.Response;\nvar TextDecoder = window.TextDecoder;\nvar TextEncoder = window.TextEncoder;\nvar AbortController = window.AbortController;\n\nif (AbortController == undefined) {\n  AbortController = function AbortController() {\n    this.signal = null;\n\n    this.abort = function () {};\n  };\n}\n\nfunction TextDecoderPolyfill() {\n  this.bitsNeeded = 0;\n  this.codePoint = 0;\n}\n\nTextDecoderPolyfill.prototype.decode = function (octets) {\n  function valid(codePoint, shift, octetsCount) {\n    if (octetsCount === 1) {\n      return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07ff;\n    }\n\n    if (octetsCount === 2) {\n      return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xd7ff || codePoint >= 0xe000 >> shift && codePoint << shift <= 0xffff;\n    }\n\n    if (octetsCount === 3) {\n      return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10ffff;\n    }\n\n    throw new Error();\n  }\n\n  function octetsCount(bitsNeeded, codePoint) {\n    if (bitsNeeded === 6 * 1) {\n      return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\n    }\n\n    if (bitsNeeded === 6 * 2) {\n      return codePoint > 15 ? 3 : 2;\n    }\n\n    if (bitsNeeded === 6 * 3) {\n      return 3;\n    }\n\n    throw new Error();\n  }\n\n  var REPLACER = 0xfffd;\n  var string = '';\n  var bitsNeeded = this.bitsNeeded;\n  var codePoint = this.codePoint;\n\n  for (var i = 0; i < octets.length; i += 1) {\n    var octet = octets[i];\n\n    if (bitsNeeded !== 0) {\n      if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\n        bitsNeeded = 0;\n        codePoint = REPLACER;\n        string += String.fromCharCode(codePoint);\n      }\n    }\n\n    if (bitsNeeded === 0) {\n      if (octet >= 0 && octet <= 127) {\n        bitsNeeded = 0;\n        codePoint = octet;\n      } else if (octet >= 192 && octet <= 223) {\n        bitsNeeded = 6 * 1;\n        codePoint = octet & 31;\n      } else if (octet >= 224 && octet <= 239) {\n        bitsNeeded = 6 * 2;\n        codePoint = octet & 15;\n      } else if (octet >= 240 && octet <= 247) {\n        bitsNeeded = 6 * 3;\n        codePoint = octet & 7;\n      } else {\n        bitsNeeded = 0;\n        codePoint = REPLACER;\n      }\n\n      if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\n        bitsNeeded = 0;\n        codePoint = REPLACER;\n      }\n    } else {\n      bitsNeeded -= 6;\n      codePoint = codePoint << 6 | octet & 63;\n    }\n\n    if (bitsNeeded === 0) {\n      if (codePoint <= 0xffff) {\n        string += String.fromCharCode(codePoint);\n      } else {\n        string += String.fromCharCode(0xd800 + (codePoint - 0xffff - 1 >> 10));\n        string += String.fromCharCode(0xdc00 + (codePoint - 0xffff - 1 & 0x3ff));\n      }\n    }\n  }\n\n  this.bitsNeeded = bitsNeeded;\n  this.codePoint = codePoint;\n  return string;\n}; // Firefox < 38 throws an error with stream option\n\n\nvar supportsStreamOption = function supportsStreamOption() {\n  try {\n    return new TextDecoder().decode(new TextEncoder().encode('test'), {\n      stream: true\n    }) === 'test';\n  } catch (error) {\n    console.log(error);\n  }\n\n  return false;\n}; // IE, Edge\n\n\nif (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\n  TextDecoder = TextDecoderPolyfill;\n}\n\nvar k = function k() {};\n\nfunction XHRWrapper(xhr) {\n  this.withCredentials = false;\n  this.responseType = '';\n  this.readyState = 0;\n  this.status = 0;\n  this.statusText = '';\n  this.responseText = '';\n  this.onprogress = k;\n  this.onreadystatechange = k;\n  this._contentType = '';\n  this._xhr = xhr;\n  this._sendTimeout = 0;\n  this._abort = k;\n}\n\nXHRWrapper.prototype.open = function (method, url) {\n  this._abort(true);\n\n  var that = this;\n  var xhr = this._xhr;\n  var state = 1;\n  var timeout = 0;\n\n  this._abort = function (silent) {\n    if (that._sendTimeout !== 0) {\n      clearTimeout(that._sendTimeout);\n      that._sendTimeout = 0;\n    }\n\n    if (state === 1 || state === 2 || state === 3) {\n      state = 4;\n      xhr.onload = k;\n      xhr.onerror = k;\n      xhr.onabort = k;\n      xhr.onprogress = k;\n      xhr.onreadystatechange = k; // IE 8 - 9: XDomainRequest#abort() does not fire any event\n      // Opera < 10: XMLHttpRequest#abort() does not fire any event\n\n      xhr.abort();\n\n      if (timeout !== 0) {\n        clearTimeout(timeout);\n        timeout = 0;\n      }\n\n      if (!silent) {\n        that.readyState = 4;\n        that.onreadystatechange();\n      }\n    }\n\n    state = 0;\n  };\n\n  var onStart = function onStart() {\n    if (state === 1) {\n      // state = 2;\n      var status = 0;\n      var statusText = '';\n      var contentType = undefined;\n\n      if (!('contentType' in xhr)) {\n        try {\n          status = xhr.status;\n          statusText = xhr.statusText;\n          contentType = xhr.getResponseHeader('Content-Type');\n        } catch (error) {\n          // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\n          // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\n          // https://bugs.webkit.org/show_bug.cgi?id=29121\n          status = 0;\n          statusText = '';\n          contentType = undefined; // Firefox < 14, Chrome ?, Safari ?\n          // https://bugs.webkit.org/show_bug.cgi?id=29658\n          // https://bugs.webkit.org/show_bug.cgi?id=77854\n        }\n      } else {\n        status = 200;\n        statusText = 'OK';\n        contentType = xhr.contentType;\n      }\n\n      if (status !== 0) {\n        state = 2;\n        that.readyState = 2;\n        that.status = status;\n        that.statusText = statusText;\n        that._contentType = contentType;\n        that.onreadystatechange();\n      }\n    }\n  };\n\n  var onProgress = function onProgress() {\n    onStart();\n\n    if (state === 2 || state === 3) {\n      state = 3;\n      var responseText = '';\n\n      try {\n        responseText = xhr.responseText;\n      } catch (error) {// IE 8 - 9 with XMLHttpRequest\n      }\n\n      that.readyState = 3;\n      that.responseText = responseText;\n      that.onprogress();\n    }\n  };\n\n  var onFinish = function onFinish() {\n    // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\n    // IE 8 fires \"onload\" without \"onprogress\"\n    onProgress();\n\n    if (state === 1 || state === 2 || state === 3) {\n      state = 4;\n\n      if (timeout !== 0) {\n        clearTimeout(timeout);\n        timeout = 0;\n      }\n\n      that.readyState = 4;\n      that.onreadystatechange();\n    }\n  };\n\n  var onReadyStateChange = function onReadyStateChange() {\n    if (xhr != undefined) {\n      // Opera 12\n      if (xhr.readyState === 4) {\n        onFinish();\n      } else if (xhr.readyState === 3) {\n        onProgress();\n      } else if (xhr.readyState === 2) {\n        onStart();\n      }\n    }\n  };\n\n  var onTimeout = function onTimeout() {\n    timeout = setTimeout(function () {\n      onTimeout();\n    }, 500);\n\n    if (xhr.readyState === 3) {\n      onProgress();\n    }\n  }; // XDomainRequest#abort removes onprogress, onerror, onload\n\n\n  xhr.onload = onFinish;\n  xhr.onerror = onFinish; // improper fix to match Firefox behaviour, but it is better than just ignore abort\n  // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\n  // https://code.google.com/p/chromium/issues/detail?id=153570\n  // IE 8 fires \"onload\" without \"onprogress\n\n  xhr.onabort = onFinish; // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\n\n  if (!('sendAsBinary' in XMLHttpRequest.prototype) && !('mozAnon' in XMLHttpRequest.prototype)) {\n    xhr.onprogress = onProgress;\n  } // IE 8 - 9 (XMLHTTPRequest)\n  // Opera < 12\n  // Firefox < 3.5\n  // Firefox 3.5 - 3.6 - ? < 9.0\n  // onprogress is not fired sometimes or delayed\n  // see also #64\n\n\n  xhr.onreadystatechange = onReadyStateChange;\n\n  if ('contentType' in xhr) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + 'padding=true';\n  }\n\n  xhr.open(method, url, true);\n\n  if ('readyState' in xhr) {\n    // workaround for Opera 12 issue with \"progress\" events\n    // #91\n    timeout = setTimeout(function () {\n      onTimeout();\n    }, 0);\n  }\n};\n\nXHRWrapper.prototype.abort = function () {\n  this._abort(false);\n};\n\nXHRWrapper.prototype.getResponseHeader = function (name) {\n  return this._contentType;\n};\n\nXHRWrapper.prototype.setRequestHeader = function (name, value) {\n  var xhr = this._xhr;\n\n  if ('setRequestHeader' in xhr) {\n    xhr.setRequestHeader(name, value);\n  }\n};\n\nXHRWrapper.prototype.getAllResponseHeaders = function () {\n  return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() : '';\n};\n\nXHRWrapper.prototype.send = function () {\n  // loading indicator in Safari < ? (6), Chrome < 14, Firefox\n  if (!('ontimeout' in XMLHttpRequest.prototype) && document != undefined && document.readyState != undefined && document.readyState !== 'complete') {\n    var that = this;\n    that._sendTimeout = setTimeout(function () {\n      that._sendTimeout = 0;\n      that.send();\n    }, 4);\n    return;\n  }\n\n  var xhr = this._xhr; // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\n\n  xhr.withCredentials = this.withCredentials;\n  xhr.responseType = this.responseType;\n\n  try {\n    // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\n    xhr.send(undefined);\n  } catch (error1) {\n    // Safari 5.1.7, Opera 12\n    throw error1;\n  }\n};\n\nfunction toLowerCase(name) {\n  return name.replace(/[A-Z]/g, function (c) {\n    return String.fromCharCode(c.charCodeAt(0) + 0x20);\n  });\n}\n\nfunction HeadersPolyfill(all) {\n  // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\n  var map = (0, _create[\"default\"])(null);\n  var array = all.split('\\r\\n');\n\n  for (var i = 0; i < array.length; i += 1) {\n    var line = array[i];\n    var parts = line.split(': ');\n    var name = parts.shift();\n    var value = parts.join(': ');\n    map[toLowerCase(name)] = value;\n  }\n\n  this._map = map;\n}\n\nHeadersPolyfill.prototype.get = function (name) {\n  return this._map[toLowerCase(name)];\n};\n\nfunction XHRTransport() {}\n\nXHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\n  xhr.open('GET', url);\n  var offset = 0;\n\n  xhr.onprogress = function () {\n    var responseText = xhr.responseText;\n    var chunk = responseText.slice(offset);\n    offset += chunk.length;\n    onProgressCallback(chunk);\n  };\n\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState === 2) {\n      var status = xhr.status;\n      var statusText = xhr.statusText;\n      var contentType = xhr.getResponseHeader('Content-Type');\n      var headers = xhr.getAllResponseHeaders();\n      onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers), function () {\n        xhr.abort();\n      });\n    } else if (xhr.readyState === 4) {\n      onFinishCallback();\n    }\n  };\n\n  xhr.withCredentials = withCredentials;\n  xhr.responseType = 'text';\n\n  for (var name in headers) {\n    if (Object.prototype.hasOwnProperty.call(headers, name)) {\n      xhr.setRequestHeader(name, headers[name]);\n    }\n  }\n\n  xhr.send();\n};\n\nfunction HeadersWrapper(headers) {\n  this._headers = headers;\n}\n\nHeadersWrapper.prototype.get = function (name) {\n  return this._headers.get(name);\n};\n\nfunction FetchTransport() {}\n\nFetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\n  var controller = new AbortController();\n  var signal = controller.signal; // see #120\n\n  var textDecoder = new TextDecoder();\n  (0, _unfetch[\"default\"])(url, {\n    headers: headers,\n    credentials: withCredentials ? 'include' : 'same-origin',\n    signal: signal,\n    cache: 'no-store'\n  }).then(function (response) {\n    var reader = response.body.getReader();\n    onStartCallback(response.status, response.statusText, response.headers.get('Content-Type'), new HeadersWrapper(response.headers), function () {\n      controller.abort();\n      reader.cancel();\n    });\n    return new _promise[\"default\"](function (resolve, reject) {\n      var readNextChunk = function readNextChunk() {\n        reader.read().then(function (result) {\n          if (result.done) {\n            // Note: bytes in textDecoder are ignored\n            resolve(undefined);\n          } else {\n            var chunk = textDecoder.decode(result.value, {\n              stream: true\n            });\n            onProgressCallback(chunk);\n            readNextChunk();\n          }\n        })['catch'](function (error) {\n          reject(error);\n        });\n      };\n\n      readNextChunk();\n    });\n  }).then(function (result) {\n    onFinishCallback();\n    return result;\n  }, function (error) {\n    onFinishCallback();\n    return _promise[\"default\"].reject(error);\n  });\n};\n\nfunction EventTarget() {\n  this._listeners = (0, _create[\"default\"])(null);\n}\n\nfunction throwError(e) {\n  setTimeout(function () {\n    throw e;\n  }, 0);\n}\n\nEventTarget.prototype.dispatchEvent = function (event) {\n  event.target = this;\n  var typeListeners = this._listeners[event.type];\n\n  if (typeListeners != undefined) {\n    var length = typeListeners.length;\n\n    for (var i = 0; i < length; i += 1) {\n      var listener = typeListeners[i];\n\n      try {\n        if (typeof listener.handleEvent === 'function') {\n          listener.handleEvent(event);\n        } else {\n          listener.call(this, event);\n        }\n      } catch (e) {\n        throwError(e);\n      }\n    }\n  }\n};\n\nEventTarget.prototype.addEventListener = function (type, listener) {\n  type = String(type);\n  var listeners = this._listeners;\n  var typeListeners = listeners[type];\n\n  if (typeListeners == undefined) {\n    typeListeners = [];\n    listeners[type] = typeListeners;\n  }\n\n  var found = false;\n\n  for (var i = 0; i < typeListeners.length; i += 1) {\n    if (typeListeners[i] === listener) {\n      found = true;\n    }\n  }\n\n  if (!found) {\n    typeListeners.push(listener);\n  }\n};\n\nEventTarget.prototype.removeEventListener = function (type, listener) {\n  type = String(type);\n  var listeners = this._listeners;\n  var typeListeners = listeners[type];\n\n  if (typeListeners != undefined) {\n    var filtered = [];\n\n    for (var i = 0; i < typeListeners.length; i += 1) {\n      if (typeListeners[i] !== listener) {\n        filtered.push(typeListeners[i]);\n      }\n    }\n\n    if (filtered.length === 0) {\n      delete listeners[type];\n    } else {\n      listeners[type] = filtered;\n    }\n  }\n};\n\nfunction Event(type) {\n  this.type = type;\n  this.target = undefined;\n}\n\nfunction MessageEvent(type, options) {\n  Event.call(this, type);\n  this.data = options.data;\n  this.lastEventId = options.lastEventId;\n}\n\nMessageEvent.prototype = (0, _create[\"default\"])(Event.prototype);\n\nfunction ConnectionEvent(type, options) {\n  Event.call(this, type);\n  this.status = options.status;\n  this.statusText = options.statusText;\n  this.headers = options.headers;\n}\n\nConnectionEvent.prototype = (0, _create[\"default\"])(Event.prototype);\nvar WAITING = -1;\nvar CONNECTING = 0;\nvar OPEN = 1;\nvar CLOSED = 2;\nvar AFTER_CR = -1;\nvar FIELD_START = 0;\nvar FIELD = 1;\nvar VALUE_START = 2;\nvar VALUE = 3;\nvar contentTypeRegExp = /^text\\/event\\-stream;?(\\s*charset\\=utf\\-8)?$/i;\nvar MINIMUM_DURATION = 1000;\nvar MAXIMUM_DURATION = 18000000;\n\nvar parseDuration = function parseDuration(value, def) {\n  var n = (0, _parseInt2[\"default\"])(value, 10);\n\n  if (n !== n) {\n    n = def;\n  }\n\n  return clampDuration(n);\n};\n\nvar clampDuration = function clampDuration(n) {\n  return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\n};\n\nvar fire = function fire(that, f, event) {\n  try {\n    if (typeof f === 'function') {\n      f.call(that, event);\n    }\n  } catch (e) {\n    throwError(e);\n  }\n};\n\nfunction EventSourcePolyfill(url, options) {\n  EventTarget.call(this);\n  this.onopen = undefined;\n  this.onmessage = undefined;\n  this.onerror = undefined;\n  this.url = undefined;\n  this.readyState = undefined;\n  this.withCredentials = undefined;\n  this._close = undefined;\n  start(this, url, options);\n}\n\nvar isFetchSupported = _unfetch[\"default\"] != undefined && Response != undefined && 'body' in Response.prototype;\n\nfunction start(es, url, options) {\n  url = String(url);\n  var withCredentials = options != undefined && Boolean(options.withCredentials);\n  var initialRetry = clampDuration(1000);\n  var heartbeatTimeout = options != undefined && options.heartbeatTimeout != undefined ? parseDuration(options.heartbeatTimeout, 45000) : clampDuration(45000);\n  var lastEventId = '';\n  var retry = initialRetry;\n  var wasActivity = false;\n  var headers = options != undefined && options.headers != undefined ? JSON.parse((0, _stringify[\"default\"])(options.headers)) : undefined;\n  var CurrentTransport = options != undefined && options.Transport != undefined ? options.Transport : XMLHttpRequest;\n  var xhr = isFetchSupported && !(options != undefined && options.Transport != undefined) ? undefined : new XHRWrapper(new CurrentTransport());\n  var transport = xhr == undefined ? new FetchTransport() : new XHRTransport();\n  var cancelFunction = undefined;\n  var timeout = 0;\n  var currentState = WAITING;\n  var dataBuffer = '';\n  var lastEventIdBuffer = '';\n  var eventTypeBuffer = '';\n  var textBuffer = '';\n  var state = FIELD_START;\n  var fieldStart = 0;\n  var valueStart = 0;\n\n  var onStart = function onStart(status, statusText, contentType, headers, cancel) {\n    if (currentState === CONNECTING) {\n      cancelFunction = cancel;\n\n      if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\n        currentState = OPEN;\n        wasActivity = true;\n        retry = initialRetry;\n        es.readyState = OPEN;\n        var event = new ConnectionEvent('open', {\n          status: status,\n          statusText: statusText,\n          headers: headers\n        });\n        es.dispatchEvent(event);\n        fire(es, es.onopen, event);\n      } else {\n        var message = '';\n\n        if (status !== 200) {\n          if (statusText) {\n            statusText = statusText.replace(/\\s+/g, ' ');\n          }\n\n          message = \"EventSource's response has a status \" + status + ' ' + statusText + ' that is not 200. Aborting the connection.';\n        } else {\n          message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? '-' : contentType.replace(/\\s+/g, ' ')) + '. Aborting the connection.';\n        }\n\n        throwError(new Error(message));\n        close();\n        var event = new ConnectionEvent('error', {\n          status: status,\n          statusText: statusText,\n          headers: headers\n        });\n        es.dispatchEvent(event);\n        fire(es, es.onerror, event);\n      }\n    }\n  };\n\n  var onProgress = function onProgress(textChunk) {\n    if (currentState === OPEN) {\n      var n = -1;\n\n      for (var i = 0; i < textChunk.length; i += 1) {\n        var c = textChunk.charCodeAt(i);\n\n        if (c === '\\n'.charCodeAt(0) || c === '\\r'.charCodeAt(0)) {\n          n = i;\n        }\n      }\n\n      var chunk = (n !== -1 ? textBuffer : '') + textChunk.slice(0, n + 1);\n      textBuffer = (n === -1 ? textBuffer : '') + textChunk.slice(n + 1);\n\n      if (chunk !== '') {\n        wasActivity = true;\n      }\n\n      for (var position = 0; position < chunk.length; position += 1) {\n        var c = chunk.charCodeAt(position);\n\n        if (state === AFTER_CR && c === '\\n'.charCodeAt(0)) {\n          state = FIELD_START;\n        } else {\n          if (state === AFTER_CR) {\n            state = FIELD_START;\n          }\n\n          if (c === '\\r'.charCodeAt(0) || c === '\\n'.charCodeAt(0)) {\n            if (state !== FIELD_START) {\n              if (state === FIELD) {\n                valueStart = position + 1;\n              }\n\n              var field = chunk.slice(fieldStart, valueStart - 1);\n              var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === ' '.charCodeAt(0) ? 1 : 0), position);\n\n              if (field === 'data') {\n                dataBuffer += '\\n';\n                dataBuffer += value;\n              } else if (field === 'id') {\n                lastEventIdBuffer = value;\n              } else if (field === 'event') {\n                eventTypeBuffer = value;\n              } else if (field === 'retry') {\n                initialRetry = parseDuration(value, initialRetry);\n                retry = initialRetry;\n              } else if (field === 'heartbeatTimeout') {\n                heartbeatTimeout = parseDuration(value, heartbeatTimeout);\n\n                if (timeout !== 0) {\n                  clearTimeout(timeout);\n                  timeout = setTimeout(function () {\n                    onTimeout();\n                  }, heartbeatTimeout);\n                }\n              }\n            }\n\n            if (state === FIELD_START) {\n              if (dataBuffer !== '') {\n                lastEventId = lastEventIdBuffer;\n\n                if (eventTypeBuffer === '') {\n                  eventTypeBuffer = 'message';\n                }\n\n                var event = new MessageEvent(eventTypeBuffer, {\n                  data: dataBuffer.slice(1),\n                  lastEventId: lastEventIdBuffer\n                });\n                es.dispatchEvent(event);\n\n                if (eventTypeBuffer === 'message') {\n                  fire(es, es.onmessage, event);\n                }\n\n                if (currentState === CLOSED) {\n                  return;\n                }\n              }\n\n              dataBuffer = '';\n              eventTypeBuffer = '';\n            }\n\n            state = c === '\\r'.charCodeAt(0) ? AFTER_CR : FIELD_START;\n          } else {\n            if (state === FIELD_START) {\n              fieldStart = position;\n              state = FIELD;\n            }\n\n            if (state === FIELD) {\n              if (c === ':'.charCodeAt(0)) {\n                valueStart = position + 1;\n                state = VALUE_START;\n              }\n            } else if (state === VALUE_START) {\n              state = VALUE;\n            }\n          }\n        }\n      }\n    }\n  };\n\n  var onFinish = function onFinish() {\n    if (currentState === OPEN || currentState === CONNECTING) {\n      currentState = WAITING;\n\n      if (timeout !== 0) {\n        clearTimeout(timeout);\n        timeout = 0;\n      }\n\n      timeout = setTimeout(function () {\n        onTimeout();\n      }, retry);\n      retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\n      es.readyState = CONNECTING;\n      var event = new Event('error');\n      es.dispatchEvent(event);\n      fire(es, es.onerror, event);\n    }\n  };\n\n  var close = function close() {\n    currentState = CLOSED;\n\n    if (cancelFunction != undefined) {\n      cancelFunction();\n      cancelFunction = undefined;\n    }\n\n    if (timeout !== 0) {\n      clearTimeout(timeout);\n      timeout = 0;\n    }\n\n    es.readyState = CLOSED;\n  };\n\n  var onTimeout = function onTimeout() {\n    timeout = 0;\n\n    if (currentState !== WAITING) {\n      if (!wasActivity && cancelFunction != undefined) {\n        throwError(new Error('No activity within ' + heartbeatTimeout + ' milliseconds. Reconnecting.'));\n        cancelFunction();\n        cancelFunction = undefined;\n      } else {\n        wasActivity = false;\n        timeout = setTimeout(function () {\n          onTimeout();\n        }, heartbeatTimeout);\n      }\n\n      return;\n    }\n\n    wasActivity = false;\n    timeout = setTimeout(function () {\n      onTimeout();\n    }, heartbeatTimeout);\n    currentState = CONNECTING;\n    dataBuffer = '';\n    eventTypeBuffer = '';\n    lastEventIdBuffer = lastEventId;\n    textBuffer = '';\n    fieldStart = 0;\n    valueStart = 0;\n    state = FIELD_START; // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\n    // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\n\n    var requestURL = url;\n\n    if (url.slice(0, 5) !== 'data:' && url.slice(0, 5) !== 'blob:') {\n      if (lastEventId !== '') {\n        requestURL += (url.indexOf('?') === -1 ? '?' : '&') + 'lastEventId=' + encodeURIComponent(lastEventId);\n      }\n    }\n\n    var requestHeaders = {};\n    requestHeaders['Accept'] = 'text/event-stream';\n\n    if (headers != undefined) {\n      for (var name in headers) {\n        if (Object.prototype.hasOwnProperty.call(headers, name)) {\n          requestHeaders[name] = headers[name];\n        }\n      }\n    }\n\n    try {\n      transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\n    } catch (error) {\n      close();\n      throw error;\n    }\n  };\n\n  es.url = url;\n  es.readyState = CONNECTING;\n  es.withCredentials = withCredentials;\n  es._close = close;\n  onTimeout();\n}\n\nEventSourcePolyfill.prototype = (0, _create[\"default\"])(EventTarget.prototype);\nEventSourcePolyfill.prototype.CONNECTING = CONNECTING;\nEventSourcePolyfill.prototype.OPEN = OPEN;\nEventSourcePolyfill.prototype.CLOSED = CLOSED;\n\nEventSourcePolyfill.prototype.close = function () {\n  this._close();\n};\n\nEventSourcePolyfill.CONNECTING = CONNECTING;\nEventSourcePolyfill.OPEN = OPEN;\nEventSourcePolyfill.CLOSED = CLOSED;\nEventSourcePolyfill.prototype.withCredentials = undefined;\nvar _default = EventSourcePolyfill;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/adamsoffer/Workspace/livepeerjs/node_modules/next/dist/client/dev/event-source-polyfill.js"],"names":["_interopRequireDefault","require","exports","__esModule","_stringify","_parseInt2","_promise","_create","_unfetch","document","window","Response","TextDecoder","TextEncoder","AbortController","undefined","signal","abort","TextDecoderPolyfill","bitsNeeded","codePoint","prototype","decode","octets","valid","shift","octetsCount","Error","REPLACER","string","i","length","octet","String","fromCharCode","supportsStreamOption","encode","stream","error","console","log","k","XHRWrapper","xhr","withCredentials","responseType","readyState","status","statusText","responseText","onprogress","onreadystatechange","_contentType","_xhr","_sendTimeout","_abort","open","method","url","that","state","timeout","silent","clearTimeout","onload","onerror","onabort","onStart","contentType","getResponseHeader","onProgress","onFinish","onReadyStateChange","onTimeout","setTimeout","XMLHttpRequest","indexOf","name","setRequestHeader","value","getAllResponseHeaders","send","error1","toLowerCase","replace","c","charCodeAt","HeadersPolyfill","all","map","array","split","line","parts","join","_map","get","XHRTransport","onStartCallback","onProgressCallback","onFinishCallback","headers","offset","chunk","slice","Object","hasOwnProperty","call","HeadersWrapper","_headers","FetchTransport","controller","textDecoder","credentials","cache","then","response","reader","body","getReader","cancel","resolve","reject","readNextChunk","read","result","done","EventTarget","_listeners","throwError","e","dispatchEvent","event","target","typeListeners","type","listener","handleEvent","addEventListener","listeners","found","push","removeEventListener","filtered","Event","MessageEvent","options","data","lastEventId","ConnectionEvent","WAITING","CONNECTING","OPEN","CLOSED","AFTER_CR","FIELD_START","FIELD","VALUE_START","VALUE","contentTypeRegExp","MINIMUM_DURATION","MAXIMUM_DURATION","parseDuration","def","n","clampDuration","Math","min","max","fire","f","EventSourcePolyfill","onopen","onmessage","_close","start","isFetchSupported","es","Boolean","initialRetry","heartbeatTimeout","retry","wasActivity","JSON","parse","CurrentTransport","Transport","transport","cancelFunction","currentState","dataBuffer","lastEventIdBuffer","eventTypeBuffer","textBuffer","fieldStart","valueStart","test","message","close","textChunk","position","field","requestURL","encodeURIComponent","requestHeaders","_default"],"mappings":"AAAA;;AAAa,IAAIA,sBAAsB,GAACC,OAAO,CAAC,sDAAD,CAAlC;;AAA2FC,OAAO,CAACC,UAAR,GAAmB,IAAnB;AAAwBD,OAAO,WAAP,GAAgB,KAAK,CAArB;;AAAuB,IAAIE,UAAU,GAACJ,sBAAsB,CAACC,OAAO,CAAC,+CAAD,CAAR,CAArC;;AAAgG,IAAII,UAAU,GAACL,sBAAsB,CAACC,OAAO,CAAC,0CAAD,CAAR,CAArC;;AAA2F,IAAIK,QAAQ,GAACN,sBAAsB,CAACC,OAAO,CAAC,wCAAD,CAAR,CAAnC;;AAAuF,IAAIM,OAAO,GAACP,sBAAsB,CAACC,OAAO,CAAC,8CAAD,CAAR,CAAlC;;AAA4F,IAAIO,QAAQ,GAACR,sBAAsB,CAACC,OAAO,CAAC,SAAD,CAAR,CAAnC;AAAwD;AAAqB;AACllB;AACA;;;AACA,IAAIQ,QAAQ,GAACC,MAAM,CAACD,QAApB;AAA6B,IAAIE,QAAQ,GAACD,MAAM,CAACC,QAApB;AAA6B,IAAIC,WAAW,GAACF,MAAM,CAACE,WAAvB;AAAmC,IAAIC,WAAW,GAACH,MAAM,CAACG,WAAvB;AAAmC,IAAIC,eAAe,GAACJ,MAAM,CAACI,eAA3B;;AAA2C,IAAGA,eAAe,IAAEC,SAApB,EAA8B;AAACD,EAAAA,eAAe,GAAC,SAASA,eAAT,GAA0B;AAAC,SAAKE,MAAL,GAAY,IAAZ;;AAAiB,SAAKC,KAAL,GAAW,YAAU,CAAE,CAAvB;AAAyB,GAArF;AAAuF;;AAAA,SAASC,mBAAT,GAA8B;AAAC,OAAKC,UAAL,GAAgB,CAAhB;AAAkB,OAAKC,SAAL,GAAe,CAAf;AAAkB;;AAAAF,mBAAmB,CAACG,SAApB,CAA8BC,MAA9B,GAAqC,UAASC,MAAT,EAAgB;AAAC,WAASC,KAAT,CAAeJ,SAAf,EAAyBK,KAAzB,EAA+BC,WAA/B,EAA2C;AAAC,QAAGA,WAAW,KAAG,CAAjB,EAAmB;AAAC,aAAON,SAAS,IAAE,UAAQK,KAAnB,IAA0BL,SAAS,IAAEK,KAAX,IAAkB,MAAnD;AAA2D;;AAAA,QAAGC,WAAW,KAAG,CAAjB,EAAmB;AAAC,aAAON,SAAS,IAAE,UAAQK,KAAnB,IAA0BL,SAAS,IAAEK,KAAX,IAAkB,MAA5C,IAAoDL,SAAS,IAAE,UAAQK,KAAnB,IAA0BL,SAAS,IAAEK,KAAX,IAAkB,MAAvG;AAA+G;;AAAA,QAAGC,WAAW,KAAG,CAAjB,EAAmB;AAAC,aAAON,SAAS,IAAE,YAAUK,KAArB,IAA4BL,SAAS,IAAEK,KAAX,IAAkB,QAArD;AAA+D;;AAAA,UAAM,IAAIE,KAAJ,EAAN;AAAmB;;AAAA,WAASD,WAAT,CAAqBP,UAArB,EAAgCC,SAAhC,EAA0C;AAAC,QAAGD,UAAU,KAAG,IAAE,CAAlB,EAAoB;AAAC,aAAOC,SAAS,IAAE,CAAX,GAAa,EAAb,GAAgB,CAAhB,GAAkBA,SAAS,GAAC,EAAV,GAAa,CAAb,GAAe,CAAxC;AAA2C;;AAAA,QAAGD,UAAU,KAAG,IAAE,CAAlB,EAAoB;AAAC,aAAOC,SAAS,GAAC,EAAV,GAAa,CAAb,GAAe,CAAtB;AAAyB;;AAAA,QAAGD,UAAU,KAAG,IAAE,CAAlB,EAAoB;AAAC,aAAO,CAAP;AAAU;;AAAA,UAAM,IAAIQ,KAAJ,EAAN;AAAmB;;AAAA,MAAIC,QAAQ,GAAC,MAAb;AAAoB,MAAIC,MAAM,GAAC,EAAX;AAAc,MAAIV,UAAU,GAAC,KAAKA,UAApB;AAA+B,MAAIC,SAAS,GAAC,KAAKA,SAAnB;;AAA6B,OAAI,IAAIU,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACP,MAAM,CAACQ,MAArB,EAA4BD,CAAC,IAAE,CAA/B,EAAiC;AAAC,QAAIE,KAAK,GAACT,MAAM,CAACO,CAAD,CAAhB;;AAAoB,QAAGX,UAAU,KAAG,CAAhB,EAAkB;AAAC,UAAGa,KAAK,GAAC,GAAN,IAAWA,KAAK,GAAC,GAAjB,IAAsB,CAACR,KAAK,CAACJ,SAAS,IAAE,CAAX,GAAaY,KAAK,GAAC,EAApB,EAAuBb,UAAU,GAAC,CAAlC,EAAoCO,WAAW,CAACP,UAAD,EAAYC,SAAZ,CAA/C,CAA/B,EAAsG;AAACD,QAAAA,UAAU,GAAC,CAAX;AAAaC,QAAAA,SAAS,GAACQ,QAAV;AAAmBC,QAAAA,MAAM,IAAEI,MAAM,CAACC,YAAP,CAAoBd,SAApB,CAAR;AAAwC;AAAC;;AAAA,QAAGD,UAAU,KAAG,CAAhB,EAAkB;AAAC,UAAGa,KAAK,IAAE,CAAP,IAAUA,KAAK,IAAE,GAApB,EAAwB;AAACb,QAAAA,UAAU,GAAC,CAAX;AAAaC,QAAAA,SAAS,GAACY,KAAV;AAAiB,OAAvD,MAA4D,IAAGA,KAAK,IAAE,GAAP,IAAYA,KAAK,IAAE,GAAtB,EAA0B;AAACb,QAAAA,UAAU,GAAC,IAAE,CAAb;AAAeC,QAAAA,SAAS,GAACY,KAAK,GAAC,EAAhB;AAAoB,OAA9D,MAAmE,IAAGA,KAAK,IAAE,GAAP,IAAYA,KAAK,IAAE,GAAtB,EAA0B;AAACb,QAAAA,UAAU,GAAC,IAAE,CAAb;AAAeC,QAAAA,SAAS,GAACY,KAAK,GAAC,EAAhB;AAAoB,OAA9D,MAAmE,IAAGA,KAAK,IAAE,GAAP,IAAYA,KAAK,IAAE,GAAtB,EAA0B;AAACb,QAAAA,UAAU,GAAC,IAAE,CAAb;AAAeC,QAAAA,SAAS,GAACY,KAAK,GAAC,CAAhB;AAAmB,OAA7D,MAAiE;AAACb,QAAAA,UAAU,GAAC,CAAX;AAAaC,QAAAA,SAAS,GAACQ,QAAV;AAAoB;;AAAA,UAAGT,UAAU,KAAG,CAAb,IAAgB,CAACK,KAAK,CAACJ,SAAD,EAAWD,UAAX,EAAsBO,WAAW,CAACP,UAAD,EAAYC,SAAZ,CAAjC,CAAzB,EAAkF;AAACD,QAAAA,UAAU,GAAC,CAAX;AAAaC,QAAAA,SAAS,GAACQ,QAAV;AAAoB;AAAC,KAA7a,MAAib;AAACT,MAAAA,UAAU,IAAE,CAAZ;AAAcC,MAAAA,SAAS,GAACA,SAAS,IAAE,CAAX,GAAaY,KAAK,GAAC,EAA7B;AAAiC;;AAAA,QAAGb,UAAU,KAAG,CAAhB,EAAkB;AAAC,UAAGC,SAAS,IAAE,MAAd,EAAqB;AAACS,QAAAA,MAAM,IAAEI,MAAM,CAACC,YAAP,CAAoBd,SAApB,CAAR;AAAwC,OAA9D,MAAkE;AAACS,QAAAA,MAAM,IAAEI,MAAM,CAACC,YAAP,CAAoB,UAAQd,SAAS,GAAC,MAAV,GAAiB,CAAjB,IAAoB,EAA5B,CAApB,CAAR;AAA6DS,QAAAA,MAAM,IAAEI,MAAM,CAACC,YAAP,CAAoB,UAAQd,SAAS,GAAC,MAAV,GAAiB,CAAjB,GAAmB,KAA3B,CAApB,CAAR;AAAgE;AAAC;AAAC;;AAAA,OAAKD,UAAL,GAAgBA,UAAhB;AAA2B,OAAKC,SAAL,GAAeA,SAAf;AAAyB,SAAOS,MAAP;AAAe,CAArrD,C,CAAsrD;;;AAC1hE,IAAIM,oBAAoB,GAAC,SAASA,oBAAT,GAA+B;AAAC,MAAG;AAAC,WAAO,IAAIvB,WAAJ,GAAkBU,MAAlB,CAAyB,IAAIT,WAAJ,GAAkBuB,MAAlB,CAAyB,MAAzB,CAAzB,EAA0D;AAACC,MAAAA,MAAM,EAAC;AAAR,KAA1D,MAA2E,MAAlF;AAA0F,GAA9F,CAA8F,OAAMC,KAAN,EAAY;AAACC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAAoB;;AAAA,SAAO,KAAP;AAAc,CAAtM,C,CAAuM;;;AACvM,IAAG1B,WAAW,IAAEG,SAAb,IAAwBF,WAAW,IAAEE,SAArC,IAAgD,CAACoB,oBAAoB,EAAxE,EAA2E;AAACvB,EAAAA,WAAW,GAACM,mBAAZ;AAAiC;;AAAA,IAAIuB,CAAC,GAAC,SAASA,CAAT,GAAY,CAAE,CAApB;;AAAqB,SAASC,UAAT,CAAoBC,GAApB,EAAwB;AAAC,OAAKC,eAAL,GAAqB,KAArB;AAA2B,OAAKC,YAAL,GAAkB,EAAlB;AAAqB,OAAKC,UAAL,GAAgB,CAAhB;AAAkB,OAAKC,MAAL,GAAY,CAAZ;AAAc,OAAKC,UAAL,GAAgB,EAAhB;AAAmB,OAAKC,YAAL,GAAkB,EAAlB;AAAqB,OAAKC,UAAL,GAAgBT,CAAhB;AAAkB,OAAKU,kBAAL,GAAwBV,CAAxB;AAA0B,OAAKW,YAAL,GAAkB,EAAlB;AAAqB,OAAKC,IAAL,GAAUV,GAAV;AAAc,OAAKW,YAAL,GAAkB,CAAlB;AAAoB,OAAKC,MAAL,GAAYd,CAAZ;AAAe;;AAAAC,UAAU,CAACrB,SAAX,CAAqBmC,IAArB,GAA0B,UAASC,MAAT,EAAgBC,GAAhB,EAAoB;AAAC,OAAKH,MAAL,CAAY,IAAZ;;AAAkB,MAAII,IAAI,GAAC,IAAT;AAAc,MAAIhB,GAAG,GAAC,KAAKU,IAAb;AAAkB,MAAIO,KAAK,GAAC,CAAV;AAAY,MAAIC,OAAO,GAAC,CAAZ;;AAAc,OAAKN,MAAL,GAAY,UAASO,MAAT,EAAgB;AAAC,QAAGH,IAAI,CAACL,YAAL,KAAoB,CAAvB,EAAyB;AAACS,MAAAA,YAAY,CAACJ,IAAI,CAACL,YAAN,CAAZ;AAAgCK,MAAAA,IAAI,CAACL,YAAL,GAAkB,CAAlB;AAAqB;;AAAA,QAAGM,KAAK,KAAG,CAAR,IAAWA,KAAK,KAAG,CAAnB,IAAsBA,KAAK,KAAG,CAAjC,EAAmC;AAACA,MAAAA,KAAK,GAAC,CAAN;AAAQjB,MAAAA,GAAG,CAACqB,MAAJ,GAAWvB,CAAX;AAAaE,MAAAA,GAAG,CAACsB,OAAJ,GAAYxB,CAAZ;AAAcE,MAAAA,GAAG,CAACuB,OAAJ,GAAYzB,CAAZ;AAAcE,MAAAA,GAAG,CAACO,UAAJ,GAAeT,CAAf;AAAiBE,MAAAA,GAAG,CAACQ,kBAAJ,GAAuBV,CAAvB,CAAnE,CAA4F;AAC3uB;;AACAE,MAAAA,GAAG,CAAC1B,KAAJ;;AAAY,UAAG4C,OAAO,KAAG,CAAb,EAAe;AAACE,QAAAA,YAAY,CAACF,OAAD,CAAZ;AAAsBA,QAAAA,OAAO,GAAC,CAAR;AAAW;;AAAA,UAAG,CAACC,MAAJ,EAAW;AAACH,QAAAA,IAAI,CAACb,UAAL,GAAgB,CAAhB;AAAkBa,QAAAA,IAAI,CAACR,kBAAL;AAA2B;AAAC;;AAAAS,IAAAA,KAAK,GAAC,CAAN;AAAS,GAFgY;;AAE/X,MAAIO,OAAO,GAAC,SAASA,OAAT,GAAkB;AAAC,QAAGP,KAAK,KAAG,CAAX,EAAa;AAAC;AAC9K,UAAIb,MAAM,GAAC,CAAX;AAAa,UAAIC,UAAU,GAAC,EAAf;AAAkB,UAAIoB,WAAW,GAACrD,SAAhB;;AAA0B,UAAG,EAAE,iBAAgB4B,GAAlB,CAAH,EAA0B;AAAC,YAAG;AAACI,UAAAA,MAAM,GAACJ,GAAG,CAACI,MAAX;AAAkBC,UAAAA,UAAU,GAACL,GAAG,CAACK,UAAf;AAA0BoB,UAAAA,WAAW,GAACzB,GAAG,CAAC0B,iBAAJ,CAAsB,cAAtB,CAAZ;AAAmD,SAAnG,CAAmG,OAAM/B,KAAN,EAAY;AAAC;AACpM;AACA;AACAS,UAAAA,MAAM,GAAC,CAAP;AAASC,UAAAA,UAAU,GAAC,EAAX;AAAcoB,UAAAA,WAAW,GAACrD,SAAZ,CAH4K,CAGtJ;AAC7C;AACA;AACC;AAAC,OANuD,MAMnD;AAACgC,QAAAA,MAAM,GAAC,GAAP;AAAWC,QAAAA,UAAU,GAAC,IAAX;AAAgBoB,QAAAA,WAAW,GAACzB,GAAG,CAACyB,WAAhB;AAA6B;;AAAA,UAAGrB,MAAM,KAAG,CAAZ,EAAc;AAACa,QAAAA,KAAK,GAAC,CAAN;AAAQD,QAAAA,IAAI,CAACb,UAAL,GAAgB,CAAhB;AAAkBa,QAAAA,IAAI,CAACZ,MAAL,GAAYA,MAAZ;AAAmBY,QAAAA,IAAI,CAACX,UAAL,GAAgBA,UAAhB;AAA2BW,QAAAA,IAAI,CAACP,YAAL,GAAkBgB,WAAlB;AAA8BT,QAAAA,IAAI,CAACR,kBAAL;AAA2B;AAAC;AAAC,GAPhF;;AAOiF,MAAImB,UAAU,GAAC,SAASA,UAAT,GAAqB;AAACH,IAAAA,OAAO;;AAAG,QAAGP,KAAK,KAAG,CAAR,IAAWA,KAAK,KAAG,CAAtB,EAAwB;AAACA,MAAAA,KAAK,GAAC,CAAN;AAAQ,UAAIX,YAAY,GAAC,EAAjB;;AAAoB,UAAG;AAACA,QAAAA,YAAY,GAACN,GAAG,CAACM,YAAjB;AAA+B,OAAnC,CAAmC,OAAMX,KAAN,EAAY,CAAC;AACrW;;AAAAqB,MAAAA,IAAI,CAACb,UAAL,GAAgB,CAAhB;AAAkBa,MAAAA,IAAI,CAACV,YAAL,GAAkBA,YAAlB;AAA+BU,MAAAA,IAAI,CAACT,UAAL;AAAmB;AAAC,GAD4I;;AAC3I,MAAIqB,QAAQ,GAAC,SAASA,QAAT,GAAmB;AAAC;AACxG;AACAD,IAAAA,UAAU;;AAAG,QAAGV,KAAK,KAAG,CAAR,IAAWA,KAAK,KAAG,CAAnB,IAAsBA,KAAK,KAAG,CAAjC,EAAmC;AAACA,MAAAA,KAAK,GAAC,CAAN;;AAAQ,UAAGC,OAAO,KAAG,CAAb,EAAe;AAACE,QAAAA,YAAY,CAACF,OAAD,CAAZ;AAAsBA,QAAAA,OAAO,GAAC,CAAR;AAAW;;AAAAF,MAAAA,IAAI,CAACb,UAAL,GAAgB,CAAhB;AAAkBa,MAAAA,IAAI,CAACR,kBAAL;AAA2B;AAAC,GAFjF;;AAEkF,MAAIqB,kBAAkB,GAAC,SAASA,kBAAT,GAA6B;AAAC,QAAG7B,GAAG,IAAE5B,SAAR,EAAkB;AAAC;AACjO,UAAG4B,GAAG,CAACG,UAAJ,KAAiB,CAApB,EAAsB;AAACyB,QAAAA,QAAQ;AAAI,OAAnC,MAAwC,IAAG5B,GAAG,CAACG,UAAJ,KAAiB,CAApB,EAAsB;AAACwB,QAAAA,UAAU;AAAI,OAArC,MAA0C,IAAG3B,GAAG,CAACG,UAAJ,KAAiB,CAApB,EAAsB;AAACqB,QAAAA,OAAO;AAAI;AAAC;AAAC,GADmC;;AAClC,MAAIM,SAAS,GAAC,SAASA,SAAT,GAAoB;AAACZ,IAAAA,OAAO,GAACa,UAAU,CAAC,YAAU;AAACD,MAAAA,SAAS;AAAI,KAAzB,EAA0B,GAA1B,CAAlB;;AAAiD,QAAG9B,GAAG,CAACG,UAAJ,KAAiB,CAApB,EAAsB;AAACwB,MAAAA,UAAU;AAAI;AAAC,GAA1H,CAb4T,CAajM;;;AAClP3B,EAAAA,GAAG,CAACqB,MAAJ,GAAWO,QAAX;AAAoB5B,EAAAA,GAAG,CAACsB,OAAJ,GAAYM,QAAZ,CAd+Z,CAc1Y;AACzC;AACA;AACA;AACA;;AACA5B,EAAAA,GAAG,CAACuB,OAAJ,GAAYK,QAAZ,CAnBmb,CAmB9Z;;AACrB,MAAG,EAAE,kBAAiBI,cAAc,CAACtD,SAAlC,KAA8C,EAAE,aAAYsD,cAAc,CAACtD,SAA7B,CAAjD,EAAyF;AAACsB,IAAAA,GAAG,CAACO,UAAJ,GAAeoB,UAAf;AAA2B,GApB8T,CAoB9T;AACrH;AACA;AACA;AACA;AACA;;;AACA3B,EAAAA,GAAG,CAACQ,kBAAJ,GAAuBqB,kBAAvB;;AAA0C,MAAG,iBAAgB7B,GAAnB,EAAuB;AAACe,IAAAA,GAAG,IAAE,CAACA,GAAG,CAACkB,OAAJ,CAAY,GAAZ,MAAmB,CAAC,CAApB,GAAsB,GAAtB,GAA0B,GAA3B,IAAgC,cAArC;AAAqD;;AAAAjC,EAAAA,GAAG,CAACa,IAAJ,CAASC,MAAT,EAAgBC,GAAhB,EAAoB,IAApB;;AAA0B,MAAG,gBAAef,GAAlB,EAAsB;AAAC;AACxK;AACAkB,IAAAA,OAAO,GAACa,UAAU,CAAC,YAAU;AAACD,MAAAA,SAAS;AAAI,KAAzB,EAA0B,CAA1B,CAAlB;AAAgD;AAAC,CA5BoV;;AA4BnV/B,UAAU,CAACrB,SAAX,CAAqBJ,KAArB,GAA2B,YAAU;AAAC,OAAKsC,MAAL,CAAY,KAAZ;AAAoB,CAA1D;;AAA2Db,UAAU,CAACrB,SAAX,CAAqBgD,iBAArB,GAAuC,UAASQ,IAAT,EAAc;AAAC,SAAO,KAAKzB,YAAZ;AAA0B,CAAhF;;AAAiFV,UAAU,CAACrB,SAAX,CAAqByD,gBAArB,GAAsC,UAASD,IAAT,EAAcE,KAAd,EAAoB;AAAC,MAAIpC,GAAG,GAAC,KAAKU,IAAb;;AAAkB,MAAG,sBAAqBV,GAAxB,EAA4B;AAACA,IAAAA,GAAG,CAACmC,gBAAJ,CAAqBD,IAArB,EAA0BE,KAA1B;AAAkC;AAAC,CAA7I;;AAA8IrC,UAAU,CAACrB,SAAX,CAAqB2D,qBAArB,GAA2C,YAAU;AAAC,SAAO,KAAK3B,IAAL,CAAU2B,qBAAV,IAAiCjE,SAAjC,GAA2C,KAAKsC,IAAL,CAAU2B,qBAAV,EAA3C,GAA6E,EAApF;AAAwF,CAA9I;;AAA+ItC,UAAU,CAACrB,SAAX,CAAqB4D,IAArB,GAA0B,YAAU;AAAC;AAChgB,MAAG,EAAE,eAAcN,cAAc,CAACtD,SAA/B,KAA2CZ,QAAQ,IAAEM,SAArD,IAAgEN,QAAQ,CAACqC,UAAT,IAAqB/B,SAArF,IAAgGN,QAAQ,CAACqC,UAAT,KAAsB,UAAzH,EAAoI;AAAC,QAAIa,IAAI,GAAC,IAAT;AAAcA,IAAAA,IAAI,CAACL,YAAL,GAAkBoB,UAAU,CAAC,YAAU;AAACf,MAAAA,IAAI,CAACL,YAAL,GAAkB,CAAlB;AAAoBK,MAAAA,IAAI,CAACsB,IAAL;AAAa,KAA7C,EAA8C,CAA9C,CAA5B;AAA6E;AAAQ;;AAAA,MAAItC,GAAG,GAAC,KAAKU,IAAb,CADuR,CACrQ;;AAC1PV,EAAAA,GAAG,CAACC,eAAJ,GAAoB,KAAKA,eAAzB;AAAyCD,EAAAA,GAAG,CAACE,YAAJ,GAAiB,KAAKA,YAAtB;;AAAmC,MAAG;AAAC;AAChFF,IAAAA,GAAG,CAACsC,IAAJ,CAASlE,SAAT;AAAqB,GADuD,CACvD,OAAMmE,MAAN,EAAa;AAAC;AACnC,UAAMA,MAAN;AAAc;AAAC,CAJ4c;;AAI3c,SAASC,WAAT,CAAqBN,IAArB,EAA0B;AAAC,SAAOA,IAAI,CAACO,OAAL,CAAa,QAAb,EAAsB,UAASC,CAAT,EAAW;AAAC,WAAOpD,MAAM,CAACC,YAAP,CAAoBmD,CAAC,CAACC,UAAF,CAAa,CAAb,IAAgB,IAApC,CAAP;AAAkD,GAApF,CAAP;AAA8F;;AAAA,SAASC,eAAT,CAAyBC,GAAzB,EAA6B;AAAC;AACvK,MAAIC,GAAG,GAAC,CAAC,GAAElF,OAAO,WAAV,EAAoB,IAApB,CAAR;AAAkC,MAAImF,KAAK,GAACF,GAAG,CAACG,KAAJ,CAAU,MAAV,CAAV;;AAA4B,OAAI,IAAI7D,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC4D,KAAK,CAAC3D,MAApB,EAA2BD,CAAC,IAAE,CAA9B,EAAgC;AAAC,QAAI8D,IAAI,GAACF,KAAK,CAAC5D,CAAD,CAAd;AAAkB,QAAI+D,KAAK,GAACD,IAAI,CAACD,KAAL,CAAW,IAAX,CAAV;AAA2B,QAAId,IAAI,GAACgB,KAAK,CAACpE,KAAN,EAAT;AAAuB,QAAIsD,KAAK,GAACc,KAAK,CAACC,IAAN,CAAW,IAAX,CAAV;AAA2BL,IAAAA,GAAG,CAACN,WAAW,CAACN,IAAD,CAAZ,CAAH,GAAuBE,KAAvB;AAA8B;;AAAA,OAAKgB,IAAL,GAAUN,GAAV;AAAe;;AAAAF,eAAe,CAAClE,SAAhB,CAA0B2E,GAA1B,GAA8B,UAASnB,IAAT,EAAc;AAAC,SAAO,KAAKkB,IAAL,CAAUZ,WAAW,CAACN,IAAD,CAArB,CAAP;AAAqC,CAAlF;;AAAmF,SAASoB,YAAT,GAAuB,CAAE;;AAAAA,YAAY,CAAC5E,SAAb,CAAuBmC,IAAvB,GAA4B,UAASb,GAAT,EAAauD,eAAb,EAA6BC,kBAA7B,EAAgDC,gBAAhD,EAAiE1C,GAAjE,EAAqEd,eAArE,EAAqFyD,OAArF,EAA6F;AAAC1D,EAAAA,GAAG,CAACa,IAAJ,CAAS,KAAT,EAAeE,GAAf;AAAoB,MAAI4C,MAAM,GAAC,CAAX;;AAAa3D,EAAAA,GAAG,CAACO,UAAJ,GAAe,YAAU;AAAC,QAAID,YAAY,GAACN,GAAG,CAACM,YAArB;AAAkC,QAAIsD,KAAK,GAACtD,YAAY,CAACuD,KAAb,CAAmBF,MAAnB,CAAV;AAAqCA,IAAAA,MAAM,IAAEC,KAAK,CAACxE,MAAd;AAAqBoE,IAAAA,kBAAkB,CAACI,KAAD,CAAlB;AAA2B,GAAjJ;;AAAkJ5D,EAAAA,GAAG,CAACQ,kBAAJ,GAAuB,YAAU;AAAC,QAAGR,GAAG,CAACG,UAAJ,KAAiB,CAApB,EAAsB;AAAC,UAAIC,MAAM,GAACJ,GAAG,CAACI,MAAf;AAAsB,UAAIC,UAAU,GAACL,GAAG,CAACK,UAAnB;AAA8B,UAAIoB,WAAW,GAACzB,GAAG,CAAC0B,iBAAJ,CAAsB,cAAtB,CAAhB;AAAsD,UAAIgC,OAAO,GAAC1D,GAAG,CAACqC,qBAAJ,EAAZ;AAAwCkB,MAAAA,eAAe,CAACnD,MAAD,EAAQC,UAAR,EAAmBoB,WAAnB,EAA+B,IAAImB,eAAJ,CAAoBc,OAApB,CAA/B,EAA4D,YAAU;AAAC1D,QAAAA,GAAG,CAAC1B,KAAJ;AAAa,OAApF,CAAf;AAAsG,KAA/Q,MAAoR,IAAG0B,GAAG,CAACG,UAAJ,KAAiB,CAApB,EAAsB;AAACsD,MAAAA,gBAAgB;AAAI;AAAC,GAAlW;;AAAmWzD,EAAAA,GAAG,CAACC,eAAJ,GAAoBA,eAApB;AAAoCD,EAAAA,GAAG,CAACE,YAAJ,GAAiB,MAAjB;;AAAwB,OAAI,IAAIgC,IAAR,IAAgBwB,OAAhB,EAAwB;AAAC,QAAGI,MAAM,CAACpF,SAAP,CAAiBqF,cAAjB,CAAgCC,IAAhC,CAAqCN,OAArC,EAA6CxB,IAA7C,CAAH,EAAsD;AAAClC,MAAAA,GAAG,CAACmC,gBAAJ,CAAqBD,IAArB,EAA0BwB,OAAO,CAACxB,IAAD,CAAjC;AAA0C;AAAC;;AAAAlC,EAAAA,GAAG,CAACsC,IAAJ;AAAY,CAAn1B;;AAAo1B,SAAS2B,cAAT,CAAwBP,OAAxB,EAAgC;AAAC,OAAKQ,QAAL,GAAcR,OAAd;AAAuB;;AAAAO,cAAc,CAACvF,SAAf,CAAyB2E,GAAzB,GAA6B,UAASnB,IAAT,EAAc;AAAC,SAAO,KAAKgC,QAAL,CAAcb,GAAd,CAAkBnB,IAAlB,CAAP;AAAgC,CAA5E;;AAA6E,SAASiC,cAAT,GAAyB,CAAE;;AAAAA,cAAc,CAACzF,SAAf,CAAyBmC,IAAzB,GAA8B,UAASb,GAAT,EAAauD,eAAb,EAA6BC,kBAA7B,EAAgDC,gBAAhD,EAAiE1C,GAAjE,EAAqEd,eAArE,EAAqFyD,OAArF,EAA6F;AAAC,MAAIU,UAAU,GAAC,IAAIjG,eAAJ,EAAf;AAAqC,MAAIE,MAAM,GAAC+F,UAAU,CAAC/F,MAAtB,CAAtC,CAAmE;;AACzgD,MAAIgG,WAAW,GAAC,IAAIpG,WAAJ,EAAhB;AAAkC,GAAC,GAAEJ,QAAQ,WAAX,EAAqBkD,GAArB,EAAyB;AAAC2C,IAAAA,OAAO,EAACA,OAAT;AAAiBY,IAAAA,WAAW,EAACrE,eAAe,GAAC,SAAD,GAAW,aAAvD;AAAqE5B,IAAAA,MAAM,EAACA,MAA5E;AAAmFkG,IAAAA,KAAK,EAAC;AAAzF,GAAzB,EAA+HC,IAA/H,CAAoI,UAASC,QAAT,EAAkB;AAAC,QAAIC,MAAM,GAACD,QAAQ,CAACE,IAAT,CAAcC,SAAd,EAAX;AAAqCrB,IAAAA,eAAe,CAACkB,QAAQ,CAACrE,MAAV,EAAiBqE,QAAQ,CAACpE,UAA1B,EAAqCoE,QAAQ,CAACf,OAAT,CAAiBL,GAAjB,CAAqB,cAArB,CAArC,EAA0E,IAAIY,cAAJ,CAAmBQ,QAAQ,CAACf,OAA5B,CAA1E,EAA+G,YAAU;AAACU,MAAAA,UAAU,CAAC9F,KAAX;AAAmBoG,MAAAA,MAAM,CAACG,MAAP;AAAiB,KAA9J,CAAf;AAA+K,WAAO,IAAIlH,QAAQ,WAAZ,CAAqB,UAASmH,OAAT,EAAiBC,MAAjB,EAAwB;AAAC,UAAIC,aAAa,GAAC,SAASA,aAAT,GAAwB;AAACN,QAAAA,MAAM,CAACO,IAAP,GAAcT,IAAd,CAAmB,UAASU,MAAT,EAAgB;AAAC,cAAGA,MAAM,CAACC,IAAV,EAAe;AAAC;AACjiBL,YAAAA,OAAO,CAAC1G,SAAD,CAAP;AAAoB,WAD6f,MACzf;AAAC,gBAAIwF,KAAK,GAACS,WAAW,CAAC1F,MAAZ,CAAmBuG,MAAM,CAAC9C,KAA1B,EAAgC;AAAC1C,cAAAA,MAAM,EAAC;AAAR,aAAhC,CAAV;AAAyD8D,YAAAA,kBAAkB,CAACI,KAAD,CAAlB;AAA0BoB,YAAAA,aAAa;AAAI;AAAC,SAD+W,EAC7W,OAD6W,EACpW,UAASrF,KAAT,EAAe;AAACoF,UAAAA,MAAM,CAACpF,KAAD,CAAN;AAAe,SADqU;AAClU,OADuR;;AACtRqF,MAAAA,aAAa;AAAI,KADuN,CAAP;AAC7M,GAD9J,EACgKR,IADhK,CACqK,UAASU,MAAT,EAAgB;AAACzB,IAAAA,gBAAgB;AAAG,WAAOyB,MAAP;AAAe,GADxN,EACyN,UAASvF,KAAT,EAAe;AAAC8D,IAAAA,gBAAgB;AAAG,WAAO9F,QAAQ,WAAR,CAAiBoH,MAAjB,CAAwBpF,KAAxB,CAAP;AAAuC,GADnS;AACsS,CAFmgC;;AAElgC,SAASyF,WAAT,GAAsB;AAAC,OAAKC,UAAL,GAAgB,CAAC,GAAEzH,OAAO,WAAV,EAAoB,IAApB,CAAhB;AAA2C;;AAAA,SAAS0H,UAAT,CAAoBC,CAApB,EAAsB;AAACxD,EAAAA,UAAU,CAAC,YAAU;AAAC,UAAMwD,CAAN;AAAS,GAArB,EAAsB,CAAtB,CAAV;AAAoC;;AAAAH,WAAW,CAAC1G,SAAZ,CAAsB8G,aAAtB,GAAoC,UAASC,KAAT,EAAe;AAACA,EAAAA,KAAK,CAACC,MAAN,GAAa,IAAb;AAAkB,MAAIC,aAAa,GAAC,KAAKN,UAAL,CAAgBI,KAAK,CAACG,IAAtB,CAAlB;;AAA8C,MAAGD,aAAa,IAAEvH,SAAlB,EAA4B;AAAC,QAAIgB,MAAM,GAACuG,aAAa,CAACvG,MAAzB;;AAAgC,SAAI,IAAID,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACC,MAAd,EAAqBD,CAAC,IAAE,CAAxB,EAA0B;AAAC,UAAI0G,QAAQ,GAACF,aAAa,CAACxG,CAAD,CAA1B;;AAA8B,UAAG;AAAC,YAAG,OAAO0G,QAAQ,CAACC,WAAhB,KAA8B,UAAjC,EAA4C;AAACD,UAAAA,QAAQ,CAACC,WAAT,CAAqBL,KAArB;AAA6B,SAA1E,MAA8E;AAACI,UAAAA,QAAQ,CAAC7B,IAAT,CAAc,IAAd,EAAmByB,KAAnB;AAA2B;AAAC,OAA/G,CAA+G,OAAMF,CAAN,EAAQ;AAACD,QAAAA,UAAU,CAACC,CAAD,CAAV;AAAe;AAAC;AAAC;AAAC,CAApX;;AAAqXH,WAAW,CAAC1G,SAAZ,CAAsBqH,gBAAtB,GAAuC,UAASH,IAAT,EAAcC,QAAd,EAAuB;AAACD,EAAAA,IAAI,GAACtG,MAAM,CAACsG,IAAD,CAAX;AAAkB,MAAII,SAAS,GAAC,KAAKX,UAAnB;AAA8B,MAAIM,aAAa,GAACK,SAAS,CAACJ,IAAD,CAA3B;;AAAkC,MAAGD,aAAa,IAAEvH,SAAlB,EAA4B;AAACuH,IAAAA,aAAa,GAAC,EAAd;AAAiBK,IAAAA,SAAS,CAACJ,IAAD,CAAT,GAAgBD,aAAhB;AAA+B;;AAAA,MAAIM,KAAK,GAAC,KAAV;;AAAgB,OAAI,IAAI9G,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACwG,aAAa,CAACvG,MAA5B,EAAmCD,CAAC,IAAE,CAAtC,EAAwC;AAAC,QAAGwG,aAAa,CAACxG,CAAD,CAAb,KAAmB0G,QAAtB,EAA+B;AAACI,MAAAA,KAAK,GAAC,IAAN;AAAY;AAAC;;AAAA,MAAG,CAACA,KAAJ,EAAU;AAACN,IAAAA,aAAa,CAACO,IAAd,CAAmBL,QAAnB;AAA8B;AAAC,CAA9W;;AAA+WT,WAAW,CAAC1G,SAAZ,CAAsByH,mBAAtB,GAA0C,UAASP,IAAT,EAAcC,QAAd,EAAuB;AAACD,EAAAA,IAAI,GAACtG,MAAM,CAACsG,IAAD,CAAX;AAAkB,MAAII,SAAS,GAAC,KAAKX,UAAnB;AAA8B,MAAIM,aAAa,GAACK,SAAS,CAACJ,IAAD,CAA3B;;AAAkC,MAAGD,aAAa,IAAEvH,SAAlB,EAA4B;AAAC,QAAIgI,QAAQ,GAAC,EAAb;;AAAgB,SAAI,IAAIjH,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACwG,aAAa,CAACvG,MAA5B,EAAmCD,CAAC,IAAE,CAAtC,EAAwC;AAAC,UAAGwG,aAAa,CAACxG,CAAD,CAAb,KAAmB0G,QAAtB,EAA+B;AAACO,QAAAA,QAAQ,CAACF,IAAT,CAAcP,aAAa,CAACxG,CAAD,CAA3B;AAAiC;AAAC;;AAAA,QAAGiH,QAAQ,CAAChH,MAAT,KAAkB,CAArB,EAAuB;AAAC,aAAO4G,SAAS,CAACJ,IAAD,CAAhB;AAAwB,KAAhD,MAAoD;AAACI,MAAAA,SAAS,CAACJ,IAAD,CAAT,GAAgBQ,QAAhB;AAA0B;AAAC;AAAC,CAA7X;;AAA8X,SAASC,KAAT,CAAeT,IAAf,EAAoB;AAAC,OAAKA,IAAL,GAAUA,IAAV;AAAe,OAAKF,MAAL,GAAYtH,SAAZ;AAAuB;;AAAA,SAASkI,YAAT,CAAsBV,IAAtB,EAA2BW,OAA3B,EAAmC;AAACF,EAAAA,KAAK,CAACrC,IAAN,CAAW,IAAX,EAAgB4B,IAAhB;AAAsB,OAAKY,IAAL,GAAUD,OAAO,CAACC,IAAlB;AAAuB,OAAKC,WAAL,GAAiBF,OAAO,CAACE,WAAzB;AAAsC;;AAAAH,YAAY,CAAC5H,SAAb,GAAuB,CAAC,GAAEd,OAAO,WAAV,EAAoByI,KAAK,CAAC3H,SAA1B,CAAvB;;AAA4D,SAASgI,eAAT,CAAyBd,IAAzB,EAA8BW,OAA9B,EAAsC;AAACF,EAAAA,KAAK,CAACrC,IAAN,CAAW,IAAX,EAAgB4B,IAAhB;AAAsB,OAAKxF,MAAL,GAAYmG,OAAO,CAACnG,MAApB;AAA2B,OAAKC,UAAL,GAAgBkG,OAAO,CAAClG,UAAxB;AAAmC,OAAKqD,OAAL,GAAa6C,OAAO,CAAC7C,OAArB;AAA8B;;AAAAgD,eAAe,CAAChI,SAAhB,GAA0B,CAAC,GAAEd,OAAO,WAAV,EAAoByI,KAAK,CAAC3H,SAA1B,CAA1B;AAA+D,IAAIiI,OAAO,GAAC,CAAC,CAAb;AAAe,IAAIC,UAAU,GAAC,CAAf;AAAiB,IAAIC,IAAI,GAAC,CAAT;AAAW,IAAIC,MAAM,GAAC,CAAX;AAAa,IAAIC,QAAQ,GAAC,CAAC,CAAd;AAAgB,IAAIC,WAAW,GAAC,CAAhB;AAAkB,IAAIC,KAAK,GAAC,CAAV;AAAY,IAAIC,WAAW,GAAC,CAAhB;AAAkB,IAAIC,KAAK,GAAC,CAAV;AAAY,IAAIC,iBAAiB,GAAC,+CAAtB;AAAsE,IAAIC,gBAAgB,GAAC,IAArB;AAA0B,IAAIC,gBAAgB,GAAC,QAArB;;AAA8B,IAAIC,aAAa,GAAC,SAASA,aAAT,CAAuBnF,KAAvB,EAA6BoF,GAA7B,EAAiC;AAAC,MAAIC,CAAC,GAAC,CAAC,GAAE/J,UAAU,WAAb,EAAuB0E,KAAvB,EAA6B,EAA7B,CAAN;;AAAuC,MAAGqF,CAAC,KAAGA,CAAP,EAAS;AAACA,IAAAA,CAAC,GAACD,GAAF;AAAO;;AAAA,SAAOE,aAAa,CAACD,CAAD,CAApB;AAAyB,CAArI;;AAAsI,IAAIC,aAAa,GAAC,SAASA,aAAT,CAAuBD,CAAvB,EAAyB;AAAC,SAAOE,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,GAAL,CAASJ,CAAT,EAAWJ,gBAAX,CAAT,EAAsCC,gBAAtC,CAAP;AAAgE,CAA5G;;AAA6G,IAAIQ,IAAI,GAAC,SAASA,IAAT,CAAc9G,IAAd,EAAmB+G,CAAnB,EAAqBtC,KAArB,EAA2B;AAAC,MAAG;AAAC,QAAG,OAAOsC,CAAP,KAAW,UAAd,EAAyB;AAACA,MAAAA,CAAC,CAAC/D,IAAF,CAAOhD,IAAP,EAAYyE,KAAZ;AAAoB;AAAC,GAAnD,CAAmD,OAAMF,CAAN,EAAQ;AAACD,IAAAA,UAAU,CAACC,CAAD,CAAV;AAAe;AAAC,CAAjH;;AAAkH,SAASyC,mBAAT,CAA6BjH,GAA7B,EAAiCwF,OAAjC,EAAyC;AAACnB,EAAAA,WAAW,CAACpB,IAAZ,CAAiB,IAAjB;AAAuB,OAAKiE,MAAL,GAAY7J,SAAZ;AAAsB,OAAK8J,SAAL,GAAe9J,SAAf;AAAyB,OAAKkD,OAAL,GAAalD,SAAb;AAAuB,OAAK2C,GAAL,GAAS3C,SAAT;AAAmB,OAAK+B,UAAL,GAAgB/B,SAAhB;AAA0B,OAAK6B,eAAL,GAAqB7B,SAArB;AAA+B,OAAK+J,MAAL,GAAY/J,SAAZ;AAAsBgK,EAAAA,KAAK,CAAC,IAAD,EAAMrH,GAAN,EAAUwF,OAAV,CAAL;AAAyB;;AAAA,IAAI8B,gBAAgB,GAACxK,QAAQ,WAAR,IAAkBO,SAAlB,IAA6BJ,QAAQ,IAAEI,SAAvC,IAAkD,UAASJ,QAAQ,CAACU,SAAzF;;AAAmG,SAAS0J,KAAT,CAAeE,EAAf,EAAkBvH,GAAlB,EAAsBwF,OAAtB,EAA8B;AAACxF,EAAAA,GAAG,GAACzB,MAAM,CAACyB,GAAD,CAAV;AAAgB,MAAId,eAAe,GAACsG,OAAO,IAAEnI,SAAT,IAAoBmK,OAAO,CAAChC,OAAO,CAACtG,eAAT,CAA/C;AAAyE,MAAIuI,YAAY,GAACd,aAAa,CAAC,IAAD,CAA9B;AAAqC,MAAIe,gBAAgB,GAAClC,OAAO,IAAEnI,SAAT,IAAoBmI,OAAO,CAACkC,gBAAR,IAA0BrK,SAA9C,GAAwDmJ,aAAa,CAAChB,OAAO,CAACkC,gBAAT,EAA0B,KAA1B,CAArE,GAAsGf,aAAa,CAAC,KAAD,CAAxI;AAAgJ,MAAIjB,WAAW,GAAC,EAAhB;AAAmB,MAAIiC,KAAK,GAACF,YAAV;AAAuB,MAAIG,WAAW,GAAC,KAAhB;AAAsB,MAAIjF,OAAO,GAAC6C,OAAO,IAAEnI,SAAT,IAAoBmI,OAAO,CAAC7C,OAAR,IAAiBtF,SAArC,GAA+CwK,IAAI,CAACC,KAAL,CAAW,CAAC,GAAEpL,UAAU,WAAb,EAAuB8I,OAAO,CAAC7C,OAA/B,CAAX,CAA/C,GAAmGtF,SAA/G;AAAyH,MAAI0K,gBAAgB,GAACvC,OAAO,IAAEnI,SAAT,IAAoBmI,OAAO,CAACwC,SAAR,IAAmB3K,SAAvC,GAAiDmI,OAAO,CAACwC,SAAzD,GAAmE/G,cAAxF;AAAuG,MAAIhC,GAAG,GAACqI,gBAAgB,IAAE,EAAE9B,OAAO,IAAEnI,SAAT,IAAoBmI,OAAO,CAACwC,SAAR,IAAmB3K,SAAzC,CAAlB,GAAsEA,SAAtE,GAAgF,IAAI2B,UAAJ,CAAe,IAAI+I,gBAAJ,EAAf,CAAxF;AAA+H,MAAIE,SAAS,GAAChJ,GAAG,IAAE5B,SAAL,GAAe,IAAI+F,cAAJ,EAAf,GAAoC,IAAIb,YAAJ,EAAlD;AAAqE,MAAI2F,cAAc,GAAC7K,SAAnB;AAA6B,MAAI8C,OAAO,GAAC,CAAZ;AAAc,MAAIgI,YAAY,GAACvC,OAAjB;AAAyB,MAAIwC,UAAU,GAAC,EAAf;AAAkB,MAAIC,iBAAiB,GAAC,EAAtB;AAAyB,MAAIC,eAAe,GAAC,EAApB;AAAuB,MAAIC,UAAU,GAAC,EAAf;AAAkB,MAAIrI,KAAK,GAAC+F,WAAV;AAAsB,MAAIuC,UAAU,GAAC,CAAf;AAAiB,MAAIC,UAAU,GAAC,CAAf;;AAAiB,MAAIhI,OAAO,GAAC,SAASA,OAAT,CAAiBpB,MAAjB,EAAwBC,UAAxB,EAAmCoB,WAAnC,EAA+CiC,OAA/C,EAAuDmB,MAAvD,EAA8D;AAAC,QAAGqE,YAAY,KAAGtC,UAAlB,EAA6B;AAACqC,MAAAA,cAAc,GAACpE,MAAf;;AAAsB,UAAGzE,MAAM,KAAG,GAAT,IAAcqB,WAAW,IAAErD,SAA3B,IAAsCgJ,iBAAiB,CAACqC,IAAlB,CAAuBhI,WAAvB,CAAzC,EAA6E;AAACyH,QAAAA,YAAY,GAACrC,IAAb;AAAkB8B,QAAAA,WAAW,GAAC,IAAZ;AAAiBD,QAAAA,KAAK,GAACF,YAAN;AAAmBF,QAAAA,EAAE,CAACnI,UAAH,GAAc0G,IAAd;AAAmB,YAAIpB,KAAK,GAAC,IAAIiB,eAAJ,CAAoB,MAApB,EAA2B;AAACtG,UAAAA,MAAM,EAACA,MAAR;AAAeC,UAAAA,UAAU,EAACA,UAA1B;AAAqCqD,UAAAA,OAAO,EAACA;AAA7C,SAA3B,CAAV;AAA4F4E,QAAAA,EAAE,CAAC9C,aAAH,CAAiBC,KAAjB;AAAwBqC,QAAAA,IAAI,CAACQ,EAAD,EAAIA,EAAE,CAACL,MAAP,EAAcxC,KAAd,CAAJ;AAA0B,OAArS,MAAyS;AAAC,YAAIiE,OAAO,GAAC,EAAZ;;AAAe,YAAGtJ,MAAM,KAAG,GAAZ,EAAgB;AAAC,cAAGC,UAAH,EAAc;AAACA,YAAAA,UAAU,GAACA,UAAU,CAACoC,OAAX,CAAmB,MAAnB,EAA0B,GAA1B,CAAX;AAA2C;;AAAAiH,UAAAA,OAAO,GAAC,yCAAuCtJ,MAAvC,GAA8C,GAA9C,GAAkDC,UAAlD,GAA6D,4CAArE;AAAmH,SAA9L,MAAkM;AAACqJ,UAAAA,OAAO,GAAC,gFAA8EjI,WAAW,IAAErD,SAAb,GAAuB,GAAvB,GAA2BqD,WAAW,CAACgB,OAAZ,CAAoB,MAApB,EAA2B,GAA3B,CAAzG,IAA0I,4BAAlJ;AAAgL;;AAAA6C,QAAAA,UAAU,CAAC,IAAItG,KAAJ,CAAU0K,OAAV,CAAD,CAAV;AAA+BC,QAAAA,KAAK;AAAG,YAAIlE,KAAK,GAAC,IAAIiB,eAAJ,CAAoB,OAApB,EAA4B;AAACtG,UAAAA,MAAM,EAACA,MAAR;AAAeC,UAAAA,UAAU,EAACA,UAA1B;AAAqCqD,UAAAA,OAAO,EAACA;AAA7C,SAA5B,CAAV;AAA6F4E,QAAAA,EAAE,CAAC9C,aAAH,CAAiBC,KAAjB;AAAwBqC,QAAAA,IAAI,CAACQ,EAAD,EAAIA,EAAE,CAAChH,OAAP,EAAemE,KAAf,CAAJ;AAA2B;AAAC;AAAC,GAAp+B;;AAAq+B,MAAI9D,UAAU,GAAC,SAASA,UAAT,CAAoBiI,SAApB,EAA8B;AAAC,QAAGV,YAAY,KAAGrC,IAAlB,EAAuB;AAAC,UAAIY,CAAC,GAAC,CAAC,CAAP;;AAAS,WAAI,IAAItI,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACyK,SAAS,CAACxK,MAAxB,EAA+BD,CAAC,IAAE,CAAlC,EAAoC;AAAC,YAAIuD,CAAC,GAACkH,SAAS,CAACjH,UAAV,CAAqBxD,CAArB,CAAN;;AAA8B,YAAGuD,CAAC,KAAG,KAAKC,UAAL,CAAgB,CAAhB,CAAJ,IAAwBD,CAAC,KAAG,KAAKC,UAAL,CAAgB,CAAhB,CAA/B,EAAkD;AAAC8E,UAAAA,CAAC,GAACtI,CAAF;AAAK;AAAC;;AAAA,UAAIyE,KAAK,GAAC,CAAC6D,CAAC,KAAG,CAAC,CAAL,GAAO6B,UAAP,GAAkB,EAAnB,IAAuBM,SAAS,CAAC/F,KAAV,CAAgB,CAAhB,EAAkB4D,CAAC,GAAC,CAApB,CAAjC;AAAwD6B,MAAAA,UAAU,GAAC,CAAC7B,CAAC,KAAG,CAAC,CAAL,GAAO6B,UAAP,GAAkB,EAAnB,IAAuBM,SAAS,CAAC/F,KAAV,CAAgB4D,CAAC,GAAC,CAAlB,CAAlC;;AAAuD,UAAG7D,KAAK,KAAG,EAAX,EAAc;AAAC+E,QAAAA,WAAW,GAAC,IAAZ;AAAkB;;AAAA,WAAI,IAAIkB,QAAQ,GAAC,CAAjB,EAAmBA,QAAQ,GAACjG,KAAK,CAACxE,MAAlC,EAAyCyK,QAAQ,IAAE,CAAnD,EAAqD;AAAC,YAAInH,CAAC,GAACkB,KAAK,CAACjB,UAAN,CAAiBkH,QAAjB,CAAN;;AAAiC,YAAG5I,KAAK,KAAG8F,QAAR,IAAkBrE,CAAC,KAAG,KAAKC,UAAL,CAAgB,CAAhB,CAAzB,EAA4C;AAAC1B,UAAAA,KAAK,GAAC+F,WAAN;AAAmB,SAAhE,MAAoE;AAAC,cAAG/F,KAAK,KAAG8F,QAAX,EAAoB;AAAC9F,YAAAA,KAAK,GAAC+F,WAAN;AAAmB;;AAAA,cAAGtE,CAAC,KAAG,KAAKC,UAAL,CAAgB,CAAhB,CAAJ,IAAwBD,CAAC,KAAG,KAAKC,UAAL,CAAgB,CAAhB,CAA/B,EAAkD;AAAC,gBAAG1B,KAAK,KAAG+F,WAAX,EAAuB;AAAC,kBAAG/F,KAAK,KAAGgG,KAAX,EAAiB;AAACuC,gBAAAA,UAAU,GAACK,QAAQ,GAAC,CAApB;AAAuB;;AAAA,kBAAIC,KAAK,GAAClG,KAAK,CAACC,KAAN,CAAY0F,UAAZ,EAAuBC,UAAU,GAAC,CAAlC,CAAV;AAA+C,kBAAIpH,KAAK,GAACwB,KAAK,CAACC,KAAN,CAAY2F,UAAU,IAAEA,UAAU,GAACK,QAAX,IAAqBjG,KAAK,CAACjB,UAAN,CAAiB6G,UAAjB,MAA+B,IAAI7G,UAAJ,CAAe,CAAf,CAApD,GAAsE,CAAtE,GAAwE,CAA1E,CAAtB,EAAmGkH,QAAnG,CAAV;;AAAuH,kBAAGC,KAAK,KAAG,MAAX,EAAkB;AAACX,gBAAAA,UAAU,IAAE,IAAZ;AAAiBA,gBAAAA,UAAU,IAAE/G,KAAZ;AAAmB,eAAvD,MAA4D,IAAG0H,KAAK,KAAG,IAAX,EAAgB;AAACV,gBAAAA,iBAAiB,GAAChH,KAAlB;AAAyB,eAA1C,MAA+C,IAAG0H,KAAK,KAAG,OAAX,EAAmB;AAACT,gBAAAA,eAAe,GAACjH,KAAhB;AAAuB,eAA3C,MAAgD,IAAG0H,KAAK,KAAG,OAAX,EAAmB;AAACtB,gBAAAA,YAAY,GAACjB,aAAa,CAACnF,KAAD,EAAOoG,YAAP,CAA1B;AAA+CE,gBAAAA,KAAK,GAACF,YAAN;AAAoB,eAAvF,MAA4F,IAAGsB,KAAK,KAAG,kBAAX,EAA8B;AAACrB,gBAAAA,gBAAgB,GAAClB,aAAa,CAACnF,KAAD,EAAOqG,gBAAP,CAA9B;;AAAuD,oBAAGvH,OAAO,KAAG,CAAb,EAAe;AAACE,kBAAAA,YAAY,CAACF,OAAD,CAAZ;AAAsBA,kBAAAA,OAAO,GAACa,UAAU,CAAC,YAAU;AAACD,oBAAAA,SAAS;AAAI,mBAAzB,EAA0B2G,gBAA1B,CAAlB;AAA+D;AAAC;AAAC;;AAAA,gBAAGxH,KAAK,KAAG+F,WAAX,EAAuB;AAAC,kBAAGmC,UAAU,KAAG,EAAhB,EAAmB;AAAC1C,gBAAAA,WAAW,GAAC2C,iBAAZ;;AAA8B,oBAAGC,eAAe,KAAG,EAArB,EAAwB;AAACA,kBAAAA,eAAe,GAAC,SAAhB;AAA2B;;AAAA,oBAAI5D,KAAK,GAAC,IAAIa,YAAJ,CAAiB+C,eAAjB,EAAiC;AAAC7C,kBAAAA,IAAI,EAAC2C,UAAU,CAACtF,KAAX,CAAiB,CAAjB,CAAN;AAA0B4C,kBAAAA,WAAW,EAAC2C;AAAtC,iBAAjC,CAAV;AAAqGd,gBAAAA,EAAE,CAAC9C,aAAH,CAAiBC,KAAjB;;AAAwB,oBAAG4D,eAAe,KAAG,SAArB,EAA+B;AAACvB,kBAAAA,IAAI,CAACQ,EAAD,EAAIA,EAAE,CAACJ,SAAP,EAAiBzC,KAAjB,CAAJ;AAA6B;;AAAA,oBAAGyD,YAAY,KAAGpC,MAAlB,EAAyB;AAAC;AAAQ;AAAC;;AAAAqC,cAAAA,UAAU,GAAC,EAAX;AAAcE,cAAAA,eAAe,GAAC,EAAhB;AAAoB;;AAAApI,YAAAA,KAAK,GAACyB,CAAC,KAAG,KAAKC,UAAL,CAAgB,CAAhB,CAAJ,GAAuBoE,QAAvB,GAAgCC,WAAtC;AAAmD,WAA9nC,MAAkoC;AAAC,gBAAG/F,KAAK,KAAG+F,WAAX,EAAuB;AAACuC,cAAAA,UAAU,GAACM,QAAX;AAAoB5I,cAAAA,KAAK,GAACgG,KAAN;AAAa;;AAAA,gBAAGhG,KAAK,KAAGgG,KAAX,EAAiB;AAAC,kBAAGvE,CAAC,KAAG,IAAIC,UAAJ,CAAe,CAAf,CAAP,EAAyB;AAAC6G,gBAAAA,UAAU,GAACK,QAAQ,GAAC,CAApB;AAAsB5I,gBAAAA,KAAK,GAACiG,WAAN;AAAmB;AAAC,aAAtF,MAA2F,IAAGjG,KAAK,KAAGiG,WAAX,EAAuB;AAACjG,cAAAA,KAAK,GAACkG,KAAN;AAAa;AAAC;AAAC;AAAC;AAAC;AAAC,GAAh2D;;AAAi2D,MAAIvF,QAAQ,GAAC,SAASA,QAAT,GAAmB;AAAC,QAAGsH,YAAY,KAAGrC,IAAf,IAAqBqC,YAAY,KAAGtC,UAAvC,EAAkD;AAACsC,MAAAA,YAAY,GAACvC,OAAb;;AAAqB,UAAGzF,OAAO,KAAG,CAAb,EAAe;AAACE,QAAAA,YAAY,CAACF,OAAD,CAAZ;AAAsBA,QAAAA,OAAO,GAAC,CAAR;AAAW;;AAAAA,MAAAA,OAAO,GAACa,UAAU,CAAC,YAAU;AAACD,QAAAA,SAAS;AAAI,OAAzB,EAA0B4G,KAA1B,CAAlB;AAAmDA,MAAAA,KAAK,GAAChB,aAAa,CAACC,IAAI,CAACC,GAAL,CAASY,YAAY,GAAC,EAAtB,EAAyBE,KAAK,GAAC,CAA/B,CAAD,CAAnB;AAAuDJ,MAAAA,EAAE,CAACnI,UAAH,GAAcyG,UAAd;AAAyB,UAAInB,KAAK,GAAC,IAAIY,KAAJ,CAAU,OAAV,CAAV;AAA6BiC,MAAAA,EAAE,CAAC9C,aAAH,CAAiBC,KAAjB;AAAwBqC,MAAAA,IAAI,CAACQ,EAAD,EAAIA,EAAE,CAAChH,OAAP,EAAemE,KAAf,CAAJ;AAA2B;AAAC,GAA9W;;AAA+W,MAAIkE,KAAK,GAAC,SAASA,KAAT,GAAgB;AAACT,IAAAA,YAAY,GAACpC,MAAb;;AAAoB,QAAGmC,cAAc,IAAE7K,SAAnB,EAA6B;AAAC6K,MAAAA,cAAc;AAAGA,MAAAA,cAAc,GAAC7K,SAAf;AAA0B;;AAAA,QAAG8C,OAAO,KAAG,CAAb,EAAe;AAACE,MAAAA,YAAY,CAACF,OAAD,CAAZ;AAAsBA,MAAAA,OAAO,GAAC,CAAR;AAAW;;AAAAoH,IAAAA,EAAE,CAACnI,UAAH,GAAc2G,MAAd;AAAsB,GAA/L;;AAAgM,MAAIhF,SAAS,GAAC,SAASA,SAAT,GAAoB;AAACZ,IAAAA,OAAO,GAAC,CAAR;;AAAU,QAAGgI,YAAY,KAAGvC,OAAlB,EAA0B;AAAC,UAAG,CAACgC,WAAD,IAAcM,cAAc,IAAE7K,SAAjC,EAA2C;AAACkH,QAAAA,UAAU,CAAC,IAAItG,KAAJ,CAAU,wBAAsByJ,gBAAtB,GAAuC,8BAAjD,CAAD,CAAV;AAA6FQ,QAAAA,cAAc;AAAGA,QAAAA,cAAc,GAAC7K,SAAf;AAA0B,OAApL,MAAwL;AAACuK,QAAAA,WAAW,GAAC,KAAZ;AAAkBzH,QAAAA,OAAO,GAACa,UAAU,CAAC,YAAU;AAACD,UAAAA,SAAS;AAAI,SAAzB,EAA0B2G,gBAA1B,CAAlB;AAA+D;;AAAA;AAAQ;;AAAAE,IAAAA,WAAW,GAAC,KAAZ;AAAkBzH,IAAAA,OAAO,GAACa,UAAU,CAAC,YAAU;AAACD,MAAAA,SAAS;AAAI,KAAzB,EAA0B2G,gBAA1B,CAAlB;AAA8DS,IAAAA,YAAY,GAACtC,UAAb;AAAwBuC,IAAAA,UAAU,GAAC,EAAX;AAAcE,IAAAA,eAAe,GAAC,EAAhB;AAAmBD,IAAAA,iBAAiB,GAAC3C,WAAlB;AAA8B6C,IAAAA,UAAU,GAAC,EAAX;AAAcC,IAAAA,UAAU,GAAC,CAAX;AAAaC,IAAAA,UAAU,GAAC,CAAX;AAAavI,IAAAA,KAAK,GAAC+F,WAAN,CAAvgB,CAAyhB;AAC30P;;AACA,QAAI+C,UAAU,GAAChJ,GAAf;;AAAmB,QAAGA,GAAG,CAAC8C,KAAJ,CAAU,CAAV,EAAY,CAAZ,MAAiB,OAAjB,IAA0B9C,GAAG,CAAC8C,KAAJ,CAAU,CAAV,EAAY,CAAZ,MAAiB,OAA9C,EAAsD;AAAC,UAAG4C,WAAW,KAAG,EAAjB,EAAoB;AAACsD,QAAAA,UAAU,IAAE,CAAChJ,GAAG,CAACkB,OAAJ,CAAY,GAAZ,MAAmB,CAAC,CAApB,GAAsB,GAAtB,GAA0B,GAA3B,IAAgC,cAAhC,GAA+C+H,kBAAkB,CAACvD,WAAD,CAA7E;AAA4F;AAAC;;AAAA,QAAIwD,cAAc,GAAC,EAAnB;AAAsBA,IAAAA,cAAc,CAAC,QAAD,CAAd,GAAyB,mBAAzB;;AAA6C,QAAGvG,OAAO,IAAEtF,SAAZ,EAAsB;AAAC,WAAI,IAAI8D,IAAR,IAAgBwB,OAAhB,EAAwB;AAAC,YAAGI,MAAM,CAACpF,SAAP,CAAiBqF,cAAjB,CAAgCC,IAAhC,CAAqCN,OAArC,EAA6CxB,IAA7C,CAAH,EAAsD;AAAC+H,UAAAA,cAAc,CAAC/H,IAAD,CAAd,GAAqBwB,OAAO,CAACxB,IAAD,CAA5B;AAAoC;AAAC;AAAC;;AAAA,QAAG;AAAC8G,MAAAA,SAAS,CAACnI,IAAV,CAAeb,GAAf,EAAmBwB,OAAnB,EAA2BG,UAA3B,EAAsCC,QAAtC,EAA+CmI,UAA/C,EAA0D9J,eAA1D,EAA0EgK,cAA1E;AAA2F,KAA/F,CAA+F,OAAMtK,KAAN,EAAY;AAACgK,MAAAA,KAAK;AAAG,YAAMhK,KAAN;AAAa;AAAC,GAFkwN;;AAEjwN2I,EAAAA,EAAE,CAACvH,GAAH,GAAOA,GAAP;AAAWuH,EAAAA,EAAE,CAACnI,UAAH,GAAcyG,UAAd;AAAyB0B,EAAAA,EAAE,CAACrI,eAAH,GAAmBA,eAAnB;AAAmCqI,EAAAA,EAAE,CAACH,MAAH,GAAUwB,KAAV;AAAgB7H,EAAAA,SAAS;AAAI;;AAAAkG,mBAAmB,CAACtJ,SAApB,GAA8B,CAAC,GAAEd,OAAO,WAAV,EAAoBwH,WAAW,CAAC1G,SAAhC,CAA9B;AAAyEsJ,mBAAmB,CAACtJ,SAApB,CAA8BkI,UAA9B,GAAyCA,UAAzC;AAAoDoB,mBAAmB,CAACtJ,SAApB,CAA8BmI,IAA9B,GAAmCA,IAAnC;AAAwCmB,mBAAmB,CAACtJ,SAApB,CAA8BoI,MAA9B,GAAqCA,MAArC;;AAA4CkB,mBAAmB,CAACtJ,SAApB,CAA8BiL,KAA9B,GAAoC,YAAU;AAAC,OAAKxB,MAAL;AAAe,CAA9D;;AAA+DH,mBAAmB,CAACpB,UAApB,GAA+BA,UAA/B;AAA0CoB,mBAAmB,CAACnB,IAApB,GAAyBA,IAAzB;AAA8BmB,mBAAmB,CAAClB,MAApB,GAA2BA,MAA3B;AAAkCkB,mBAAmB,CAACtJ,SAApB,CAA8BuB,eAA9B,GAA8C7B,SAA9C;AAAwD,IAAI8L,QAAQ,GAAClC,mBAAb;AAAiCzK,OAAO,WAAP,GAAgB2M,QAAhB","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _stringify=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/json/stringify\"));var _parseInt2=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/parse-int\"));var _promise=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));var _create=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/create\"));var _unfetch=_interopRequireDefault(require(\"unfetch\"));/* eslint-disable */ // Improved version of https://github.com/Yaffle/EventSource/\n// Available under MIT License (MIT)\n// Only tries to support IE11 and nothing below\nvar document=window.document;var Response=window.Response;var TextDecoder=window.TextDecoder;var TextEncoder=window.TextEncoder;var AbortController=window.AbortController;if(AbortController==undefined){AbortController=function AbortController(){this.signal=null;this.abort=function(){};};}function TextDecoderPolyfill(){this.bitsNeeded=0;this.codePoint=0;}TextDecoderPolyfill.prototype.decode=function(octets){function valid(codePoint,shift,octetsCount){if(octetsCount===1){return codePoint>=0x0080>>shift&&codePoint<<shift<=0x07ff;}if(octetsCount===2){return codePoint>=0x0800>>shift&&codePoint<<shift<=0xd7ff||codePoint>=0xe000>>shift&&codePoint<<shift<=0xffff;}if(octetsCount===3){return codePoint>=0x010000>>shift&&codePoint<<shift<=0x10ffff;}throw new Error();}function octetsCount(bitsNeeded,codePoint){if(bitsNeeded===6*1){return codePoint>>6>15?3:codePoint>31?2:1;}if(bitsNeeded===6*2){return codePoint>15?3:2;}if(bitsNeeded===6*3){return 3;}throw new Error();}var REPLACER=0xfffd;var string='';var bitsNeeded=this.bitsNeeded;var codePoint=this.codePoint;for(var i=0;i<octets.length;i+=1){var octet=octets[i];if(bitsNeeded!==0){if(octet<128||octet>191||!valid(codePoint<<6|octet&63,bitsNeeded-6,octetsCount(bitsNeeded,codePoint))){bitsNeeded=0;codePoint=REPLACER;string+=String.fromCharCode(codePoint);}}if(bitsNeeded===0){if(octet>=0&&octet<=127){bitsNeeded=0;codePoint=octet;}else if(octet>=192&&octet<=223){bitsNeeded=6*1;codePoint=octet&31;}else if(octet>=224&&octet<=239){bitsNeeded=6*2;codePoint=octet&15;}else if(octet>=240&&octet<=247){bitsNeeded=6*3;codePoint=octet&7;}else{bitsNeeded=0;codePoint=REPLACER;}if(bitsNeeded!==0&&!valid(codePoint,bitsNeeded,octetsCount(bitsNeeded,codePoint))){bitsNeeded=0;codePoint=REPLACER;}}else{bitsNeeded-=6;codePoint=codePoint<<6|octet&63;}if(bitsNeeded===0){if(codePoint<=0xffff){string+=String.fromCharCode(codePoint);}else{string+=String.fromCharCode(0xd800+(codePoint-0xffff-1>>10));string+=String.fromCharCode(0xdc00+(codePoint-0xffff-1&0x3ff));}}}this.bitsNeeded=bitsNeeded;this.codePoint=codePoint;return string;};// Firefox < 38 throws an error with stream option\nvar supportsStreamOption=function supportsStreamOption(){try{return new TextDecoder().decode(new TextEncoder().encode('test'),{stream:true})==='test';}catch(error){console.log(error);}return false;};// IE, Edge\nif(TextDecoder==undefined||TextEncoder==undefined||!supportsStreamOption()){TextDecoder=TextDecoderPolyfill;}var k=function k(){};function XHRWrapper(xhr){this.withCredentials=false;this.responseType='';this.readyState=0;this.status=0;this.statusText='';this.responseText='';this.onprogress=k;this.onreadystatechange=k;this._contentType='';this._xhr=xhr;this._sendTimeout=0;this._abort=k;}XHRWrapper.prototype.open=function(method,url){this._abort(true);var that=this;var xhr=this._xhr;var state=1;var timeout=0;this._abort=function(silent){if(that._sendTimeout!==0){clearTimeout(that._sendTimeout);that._sendTimeout=0;}if(state===1||state===2||state===3){state=4;xhr.onload=k;xhr.onerror=k;xhr.onabort=k;xhr.onprogress=k;xhr.onreadystatechange=k;// IE 8 - 9: XDomainRequest#abort() does not fire any event\n// Opera < 10: XMLHttpRequest#abort() does not fire any event\nxhr.abort();if(timeout!==0){clearTimeout(timeout);timeout=0;}if(!silent){that.readyState=4;that.onreadystatechange();}}state=0;};var onStart=function onStart(){if(state===1){// state = 2;\nvar status=0;var statusText='';var contentType=undefined;if(!('contentType'in xhr)){try{status=xhr.status;statusText=xhr.statusText;contentType=xhr.getResponseHeader('Content-Type');}catch(error){// IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\n// Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\n// https://bugs.webkit.org/show_bug.cgi?id=29121\nstatus=0;statusText='';contentType=undefined;// Firefox < 14, Chrome ?, Safari ?\n// https://bugs.webkit.org/show_bug.cgi?id=29658\n// https://bugs.webkit.org/show_bug.cgi?id=77854\n}}else{status=200;statusText='OK';contentType=xhr.contentType;}if(status!==0){state=2;that.readyState=2;that.status=status;that.statusText=statusText;that._contentType=contentType;that.onreadystatechange();}}};var onProgress=function onProgress(){onStart();if(state===2||state===3){state=3;var responseText='';try{responseText=xhr.responseText;}catch(error){// IE 8 - 9 with XMLHttpRequest\n}that.readyState=3;that.responseText=responseText;that.onprogress();}};var onFinish=function onFinish(){// Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\n// IE 8 fires \"onload\" without \"onprogress\"\nonProgress();if(state===1||state===2||state===3){state=4;if(timeout!==0){clearTimeout(timeout);timeout=0;}that.readyState=4;that.onreadystatechange();}};var onReadyStateChange=function onReadyStateChange(){if(xhr!=undefined){// Opera 12\nif(xhr.readyState===4){onFinish();}else if(xhr.readyState===3){onProgress();}else if(xhr.readyState===2){onStart();}}};var onTimeout=function onTimeout(){timeout=setTimeout(function(){onTimeout();},500);if(xhr.readyState===3){onProgress();}};// XDomainRequest#abort removes onprogress, onerror, onload\nxhr.onload=onFinish;xhr.onerror=onFinish;// improper fix to match Firefox behaviour, but it is better than just ignore abort\n// see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\n// https://bugzilla.mozilla.org/show_bug.cgi?id=880200\n// https://code.google.com/p/chromium/issues/detail?id=153570\n// IE 8 fires \"onload\" without \"onprogress\nxhr.onabort=onFinish;// https://bugzilla.mozilla.org/show_bug.cgi?id=736723\nif(!('sendAsBinary'in XMLHttpRequest.prototype)&&!('mozAnon'in XMLHttpRequest.prototype)){xhr.onprogress=onProgress;}// IE 8 - 9 (XMLHTTPRequest)\n// Opera < 12\n// Firefox < 3.5\n// Firefox 3.5 - 3.6 - ? < 9.0\n// onprogress is not fired sometimes or delayed\n// see also #64\nxhr.onreadystatechange=onReadyStateChange;if('contentType'in xhr){url+=(url.indexOf('?')===-1?'?':'&')+'padding=true';}xhr.open(method,url,true);if('readyState'in xhr){// workaround for Opera 12 issue with \"progress\" events\n// #91\ntimeout=setTimeout(function(){onTimeout();},0);}};XHRWrapper.prototype.abort=function(){this._abort(false);};XHRWrapper.prototype.getResponseHeader=function(name){return this._contentType;};XHRWrapper.prototype.setRequestHeader=function(name,value){var xhr=this._xhr;if('setRequestHeader'in xhr){xhr.setRequestHeader(name,value);}};XHRWrapper.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=undefined?this._xhr.getAllResponseHeaders():'';};XHRWrapper.prototype.send=function(){// loading indicator in Safari < ? (6), Chrome < 14, Firefox\nif(!('ontimeout'in XMLHttpRequest.prototype)&&document!=undefined&&document.readyState!=undefined&&document.readyState!=='complete'){var that=this;that._sendTimeout=setTimeout(function(){that._sendTimeout=0;that.send();},4);return;}var xhr=this._xhr;// withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\nxhr.withCredentials=this.withCredentials;xhr.responseType=this.responseType;try{// xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\nxhr.send(undefined);}catch(error1){// Safari 5.1.7, Opera 12\nthrow error1;}};function toLowerCase(name){return name.replace(/[A-Z]/g,function(c){return String.fromCharCode(c.charCodeAt(0)+0x20);});}function HeadersPolyfill(all){// Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\nvar map=(0,_create.default)(null);var array=all.split('\\r\\n');for(var i=0;i<array.length;i+=1){var line=array[i];var parts=line.split(': ');var name=parts.shift();var value=parts.join(': ');map[toLowerCase(name)]=value;}this._map=map;}HeadersPolyfill.prototype.get=function(name){return this._map[toLowerCase(name)];};function XHRTransport(){}XHRTransport.prototype.open=function(xhr,onStartCallback,onProgressCallback,onFinishCallback,url,withCredentials,headers){xhr.open('GET',url);var offset=0;xhr.onprogress=function(){var responseText=xhr.responseText;var chunk=responseText.slice(offset);offset+=chunk.length;onProgressCallback(chunk);};xhr.onreadystatechange=function(){if(xhr.readyState===2){var status=xhr.status;var statusText=xhr.statusText;var contentType=xhr.getResponseHeader('Content-Type');var headers=xhr.getAllResponseHeaders();onStartCallback(status,statusText,contentType,new HeadersPolyfill(headers),function(){xhr.abort();});}else if(xhr.readyState===4){onFinishCallback();}};xhr.withCredentials=withCredentials;xhr.responseType='text';for(var name in headers){if(Object.prototype.hasOwnProperty.call(headers,name)){xhr.setRequestHeader(name,headers[name]);}}xhr.send();};function HeadersWrapper(headers){this._headers=headers;}HeadersWrapper.prototype.get=function(name){return this._headers.get(name);};function FetchTransport(){}FetchTransport.prototype.open=function(xhr,onStartCallback,onProgressCallback,onFinishCallback,url,withCredentials,headers){var controller=new AbortController();var signal=controller.signal;// see #120\nvar textDecoder=new TextDecoder();(0,_unfetch.default)(url,{headers:headers,credentials:withCredentials?'include':'same-origin',signal:signal,cache:'no-store'}).then(function(response){var reader=response.body.getReader();onStartCallback(response.status,response.statusText,response.headers.get('Content-Type'),new HeadersWrapper(response.headers),function(){controller.abort();reader.cancel();});return new _promise.default(function(resolve,reject){var readNextChunk=function readNextChunk(){reader.read().then(function(result){if(result.done){// Note: bytes in textDecoder are ignored\nresolve(undefined);}else{var chunk=textDecoder.decode(result.value,{stream:true});onProgressCallback(chunk);readNextChunk();}})['catch'](function(error){reject(error);});};readNextChunk();});}).then(function(result){onFinishCallback();return result;},function(error){onFinishCallback();return _promise.default.reject(error);});};function EventTarget(){this._listeners=(0,_create.default)(null);}function throwError(e){setTimeout(function(){throw e;},0);}EventTarget.prototype.dispatchEvent=function(event){event.target=this;var typeListeners=this._listeners[event.type];if(typeListeners!=undefined){var length=typeListeners.length;for(var i=0;i<length;i+=1){var listener=typeListeners[i];try{if(typeof listener.handleEvent==='function'){listener.handleEvent(event);}else{listener.call(this,event);}}catch(e){throwError(e);}}}};EventTarget.prototype.addEventListener=function(type,listener){type=String(type);var listeners=this._listeners;var typeListeners=listeners[type];if(typeListeners==undefined){typeListeners=[];listeners[type]=typeListeners;}var found=false;for(var i=0;i<typeListeners.length;i+=1){if(typeListeners[i]===listener){found=true;}}if(!found){typeListeners.push(listener);}};EventTarget.prototype.removeEventListener=function(type,listener){type=String(type);var listeners=this._listeners;var typeListeners=listeners[type];if(typeListeners!=undefined){var filtered=[];for(var i=0;i<typeListeners.length;i+=1){if(typeListeners[i]!==listener){filtered.push(typeListeners[i]);}}if(filtered.length===0){delete listeners[type];}else{listeners[type]=filtered;}}};function Event(type){this.type=type;this.target=undefined;}function MessageEvent(type,options){Event.call(this,type);this.data=options.data;this.lastEventId=options.lastEventId;}MessageEvent.prototype=(0,_create.default)(Event.prototype);function ConnectionEvent(type,options){Event.call(this,type);this.status=options.status;this.statusText=options.statusText;this.headers=options.headers;}ConnectionEvent.prototype=(0,_create.default)(Event.prototype);var WAITING=-1;var CONNECTING=0;var OPEN=1;var CLOSED=2;var AFTER_CR=-1;var FIELD_START=0;var FIELD=1;var VALUE_START=2;var VALUE=3;var contentTypeRegExp=/^text\\/event\\-stream;?(\\s*charset\\=utf\\-8)?$/i;var MINIMUM_DURATION=1000;var MAXIMUM_DURATION=18000000;var parseDuration=function parseDuration(value,def){var n=(0,_parseInt2.default)(value,10);if(n!==n){n=def;}return clampDuration(n);};var clampDuration=function clampDuration(n){return Math.min(Math.max(n,MINIMUM_DURATION),MAXIMUM_DURATION);};var fire=function fire(that,f,event){try{if(typeof f==='function'){f.call(that,event);}}catch(e){throwError(e);}};function EventSourcePolyfill(url,options){EventTarget.call(this);this.onopen=undefined;this.onmessage=undefined;this.onerror=undefined;this.url=undefined;this.readyState=undefined;this.withCredentials=undefined;this._close=undefined;start(this,url,options);}var isFetchSupported=_unfetch.default!=undefined&&Response!=undefined&&'body'in Response.prototype;function start(es,url,options){url=String(url);var withCredentials=options!=undefined&&Boolean(options.withCredentials);var initialRetry=clampDuration(1000);var heartbeatTimeout=options!=undefined&&options.heartbeatTimeout!=undefined?parseDuration(options.heartbeatTimeout,45000):clampDuration(45000);var lastEventId='';var retry=initialRetry;var wasActivity=false;var headers=options!=undefined&&options.headers!=undefined?JSON.parse((0,_stringify.default)(options.headers)):undefined;var CurrentTransport=options!=undefined&&options.Transport!=undefined?options.Transport:XMLHttpRequest;var xhr=isFetchSupported&&!(options!=undefined&&options.Transport!=undefined)?undefined:new XHRWrapper(new CurrentTransport());var transport=xhr==undefined?new FetchTransport():new XHRTransport();var cancelFunction=undefined;var timeout=0;var currentState=WAITING;var dataBuffer='';var lastEventIdBuffer='';var eventTypeBuffer='';var textBuffer='';var state=FIELD_START;var fieldStart=0;var valueStart=0;var onStart=function onStart(status,statusText,contentType,headers,cancel){if(currentState===CONNECTING){cancelFunction=cancel;if(status===200&&contentType!=undefined&&contentTypeRegExp.test(contentType)){currentState=OPEN;wasActivity=true;retry=initialRetry;es.readyState=OPEN;var event=new ConnectionEvent('open',{status:status,statusText:statusText,headers:headers});es.dispatchEvent(event);fire(es,es.onopen,event);}else{var message='';if(status!==200){if(statusText){statusText=statusText.replace(/\\s+/g,' ');}message=\"EventSource's response has a status \"+status+' '+statusText+' that is not 200. Aborting the connection.';}else{message=\"EventSource's response has a Content-Type specifying an unsupported type: \"+(contentType==undefined?'-':contentType.replace(/\\s+/g,' '))+'. Aborting the connection.';}throwError(new Error(message));close();var event=new ConnectionEvent('error',{status:status,statusText:statusText,headers:headers});es.dispatchEvent(event);fire(es,es.onerror,event);}}};var onProgress=function onProgress(textChunk){if(currentState===OPEN){var n=-1;for(var i=0;i<textChunk.length;i+=1){var c=textChunk.charCodeAt(i);if(c==='\\n'.charCodeAt(0)||c==='\\r'.charCodeAt(0)){n=i;}}var chunk=(n!==-1?textBuffer:'')+textChunk.slice(0,n+1);textBuffer=(n===-1?textBuffer:'')+textChunk.slice(n+1);if(chunk!==''){wasActivity=true;}for(var position=0;position<chunk.length;position+=1){var c=chunk.charCodeAt(position);if(state===AFTER_CR&&c==='\\n'.charCodeAt(0)){state=FIELD_START;}else{if(state===AFTER_CR){state=FIELD_START;}if(c==='\\r'.charCodeAt(0)||c==='\\n'.charCodeAt(0)){if(state!==FIELD_START){if(state===FIELD){valueStart=position+1;}var field=chunk.slice(fieldStart,valueStart-1);var value=chunk.slice(valueStart+(valueStart<position&&chunk.charCodeAt(valueStart)===' '.charCodeAt(0)?1:0),position);if(field==='data'){dataBuffer+='\\n';dataBuffer+=value;}else if(field==='id'){lastEventIdBuffer=value;}else if(field==='event'){eventTypeBuffer=value;}else if(field==='retry'){initialRetry=parseDuration(value,initialRetry);retry=initialRetry;}else if(field==='heartbeatTimeout'){heartbeatTimeout=parseDuration(value,heartbeatTimeout);if(timeout!==0){clearTimeout(timeout);timeout=setTimeout(function(){onTimeout();},heartbeatTimeout);}}}if(state===FIELD_START){if(dataBuffer!==''){lastEventId=lastEventIdBuffer;if(eventTypeBuffer===''){eventTypeBuffer='message';}var event=new MessageEvent(eventTypeBuffer,{data:dataBuffer.slice(1),lastEventId:lastEventIdBuffer});es.dispatchEvent(event);if(eventTypeBuffer==='message'){fire(es,es.onmessage,event);}if(currentState===CLOSED){return;}}dataBuffer='';eventTypeBuffer='';}state=c==='\\r'.charCodeAt(0)?AFTER_CR:FIELD_START;}else{if(state===FIELD_START){fieldStart=position;state=FIELD;}if(state===FIELD){if(c===':'.charCodeAt(0)){valueStart=position+1;state=VALUE_START;}}else if(state===VALUE_START){state=VALUE;}}}}}};var onFinish=function onFinish(){if(currentState===OPEN||currentState===CONNECTING){currentState=WAITING;if(timeout!==0){clearTimeout(timeout);timeout=0;}timeout=setTimeout(function(){onTimeout();},retry);retry=clampDuration(Math.min(initialRetry*16,retry*2));es.readyState=CONNECTING;var event=new Event('error');es.dispatchEvent(event);fire(es,es.onerror,event);}};var close=function close(){currentState=CLOSED;if(cancelFunction!=undefined){cancelFunction();cancelFunction=undefined;}if(timeout!==0){clearTimeout(timeout);timeout=0;}es.readyState=CLOSED;};var onTimeout=function onTimeout(){timeout=0;if(currentState!==WAITING){if(!wasActivity&&cancelFunction!=undefined){throwError(new Error('No activity within '+heartbeatTimeout+' milliseconds. Reconnecting.'));cancelFunction();cancelFunction=undefined;}else{wasActivity=false;timeout=setTimeout(function(){onTimeout();},heartbeatTimeout);}return;}wasActivity=false;timeout=setTimeout(function(){onTimeout();},heartbeatTimeout);currentState=CONNECTING;dataBuffer='';eventTypeBuffer='';lastEventIdBuffer=lastEventId;textBuffer='';fieldStart=0;valueStart=0;state=FIELD_START;// https://bugzilla.mozilla.org/show_bug.cgi?id=428916\n// Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\nvar requestURL=url;if(url.slice(0,5)!=='data:'&&url.slice(0,5)!=='blob:'){if(lastEventId!==''){requestURL+=(url.indexOf('?')===-1?'?':'&')+'lastEventId='+encodeURIComponent(lastEventId);}}var requestHeaders={};requestHeaders['Accept']='text/event-stream';if(headers!=undefined){for(var name in headers){if(Object.prototype.hasOwnProperty.call(headers,name)){requestHeaders[name]=headers[name];}}}try{transport.open(xhr,onStart,onProgress,onFinish,requestURL,withCredentials,requestHeaders);}catch(error){close();throw error;}};es.url=url;es.readyState=CONNECTING;es.withCredentials=withCredentials;es._close=close;onTimeout();}EventSourcePolyfill.prototype=(0,_create.default)(EventTarget.prototype);EventSourcePolyfill.prototype.CONNECTING=CONNECTING;EventSourcePolyfill.prototype.OPEN=OPEN;EventSourcePolyfill.prototype.CLOSED=CLOSED;EventSourcePolyfill.prototype.close=function(){this._close();};EventSourcePolyfill.CONNECTING=CONNECTING;EventSourcePolyfill.OPEN=OPEN;EventSourcePolyfill.CLOSED=CLOSED;EventSourcePolyfill.prototype.withCredentials=undefined;var _default=EventSourcePolyfill;exports.default=_default;"]},"metadata":{},"sourceType":"script"}